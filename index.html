<html><head>
<title>Password bookmarklet generator</title>
<meta name = "viewport" content = "initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no, width = device-width">
<link rel="shortcut icon" type="image/svg+xml" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAC4JqlRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAT9JREFUeNrcV9ENgyAQFcN/3aCOwAiM4Ais0k06QkdgBEdwBDsBPVKatIh6d4AmJXlpRLj3uPOOq3DONSWGEKKDHw1Q0asRYIFnTm70AnIAowfcvakd+DX9Yn8muQHMCPIP/FpTREAgd0yYLAEh1lgyGxDP6xwBE9Ld6muPisI1sQQQXG8Qe03LyLgBuW5MzE2xLY4AjVynEnP9whYjBJSU2/oG3mAUHWrK+Qx4rL0X1FIMJbdM7Q6jJZKrpux4tkRyW1iAxcZeEWs+uiSfSb5fCSuS798Flcm3b8OK5N7msNkPVCRPdkRyJdUu1HwOl1TH7gkzTv5T86mQjJPfoucHGBrZ3XQ4OdrtQCZKlkIRXIiOeQ0BpNuttADJiHlzqAdKnzirH/hLAfLomKe+Ad+rX4+KecoDOvxjOWW8BBgAXGF3xJKIHJUAAAAASUVORK5CYII=" />
<style>
	html { font-size: 80%; }
</style>
</head><body>
<style scoped class="ztA">
.ztA {
	position: fixed;
	left: 1rem;
	top: 1rem;
	z-index: 2147483647;
	padding: .3rem;
	background-color: #FF615F;
	border: 1px solid #C00033;
	box-shadow: 1px 3px 8px rgba(0,0,0,0.3);
	font-family: Verdana, sans;
	font-size: 1rem;
	line-height: 140%;
	color: #C00033;
}
.ztA hr {
	border: 0;
	border-top: 1px dashed #e8003e;
}
.ztA .data:before {
	content: attr(data-a);
}
.ztA input, .ztA textarea {
	font-family: monospace;
	border: 1px solid #e8003e;
	color: black;
}
.ztA input:focus, .ztA textarea:focus {
    outline: none;
	box-shadow: 0 0 8px 2px #FFEF81 inset;
}
.ztA input::selection, .ztA textarea::selection {
    background-color: #C00033;
    color: white;
}
.ztA *[readonly], .ztA .result {
	background-color: #FFEF81;
}
.ztA input {
	display: block;
	width: 15rem;
	padding: 0 .5rem;
	-webkit-border-radius: 0;
	border-top-width: 0;
	font-size: 1.2rem;
	line-height: 160%;
}
/*.ztA .result {
	float:left;
}
.ztA .result+label {
	display: inline;
}
.ztA input[type=checkbox] {
	width: auto;
	display: none;
}
.ztA input[type=checkbox]+svg {
	display: inline-block;
	width: 1.2rem;
	height: 1.2rem;
	margin: .2rem 0 0 .2rem;
	fill: #C00033;
}
.ztA input[type=checkbox]:checked+svg {
	fill: #FFEF81;
}*/
.ztA p {
	width: 24rem;
	margin: 1rem;
}
.ztA label {
	display: block;
	width: 24rem;
	text-align: right;
	font-size: 1rem;
	line-height: 1rem;
}
	.ztA label input {
		display: inline-block;
		margin-left: 1rem;
	}
	.ztA .info {
		position: relative;
		display: inline-block;
		width: 1rem;
		height: 1rem;
		margin-left: .5rem;
		border-radius: 50%;
		border: 1px solid #C00033;
		font-size: .9rem;
		line-height: 1rem;
		text-align: center;
	}
	.ztA .info:hover:after {
		content: attr(data-title);
		position: absolute;
		left: 1rem;
		top: 1rem;
		width: 14rem;
		padding: .5rem;
		background-color: #eee;
		border: 1px solid dimgray;
		color: black;
		font-size: 1rem;
		line-height: 140%;
		text-align: left;
	}
.ztA .right {
	float: right;
}
.ztA .close {
	padding-left: .2rem;
	font-size: 1.4rem;
	line-height: 100%;
	font-weight: bold;
	cursor: pointer;
	color: #C00033;
}
.ztA .bookmarklet {
	display: block;
	padding: .5rem;
	margin-top: .5rem;
	text-align: center;
	background-color: #e8003e;
	font-size: .1rem;
	text-decoration: none;
	color: #e8003e;
}
.ztA .bookmarklet:before {
	font-size: 1.6rem;
	line-height: 140%;
	font-weight: bold;
	text-transform: uppercase;
	color: white;
}
.ztA .bookmarklet:hover {
	background-color: #C00033;
	color: #C00033;
}
.ztA textarea {
	display: none;
	font-size: .8rem;
	width: 40rem;
	height: 20rem;
	margin-top: .5rem;
	border: 1px solid #e8003e;
}
.ztA.nohost textarea {
	display: block;
}
</style>
<!--<script type="text/javascript" src="uglify.js"></script>-->
<script type="text/javascript">
	"use strict";function array_to_hash(b){var c=Object.create(null);for(var d=0;d<b.length;++d){c[b[d]]=true}return c}function slice(b,c){return Array.prototype.slice.call(b,c||0)}function characters(a){return a.split("")}function member(a,c){for(var b=c.length;--b>=0;){if(c[b]==a){return true}}return false}function find_if(b,d){for(var a=0,c=d.length;a<c;++a){if(b(d[a])){return d[a]}}}function repeat_string(c,a){if(a<=0){return""}if(a==1){return c}var b=repeat_string(c,a>>1);b+=b;if(a&1){b+=c}return b}function DefaultsError(b,a){Error.call(this,b);this.msg=b;this.defs=a}DefaultsError.prototype=Object.create(Error.prototype);DefaultsError.prototype.constructor=DefaultsError;DefaultsError.croak=function(b,a){throw new DefaultsError(b,a)};function defaults(c,a,e){if(c===true){c={}}var b=c||{};if(e){for(var d in b){if(b.hasOwnProperty(d)&&!a.hasOwnProperty(d)){DefaultsError.croak("`"+d+"` is not a supported option",a)}}}for(var d in a){if(a.hasOwnProperty(d)){b[d]=(c&&c.hasOwnProperty(d))?c[d]:a[d]}}return b}function merge(c,b){for(var a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}return c}function noop(){}var MAP=(function(){function c(h,l,g){var j=[],m=[],k;function n(){var i=l(h[k],k);var f=i instanceof b;if(f){i=i.v}if(i instanceof a){i=i.v;if(i instanceof e){m.push.apply(m,g?i.v.slice().reverse():i.v)}else{m.push(i)}}else{if(i!==d){if(i instanceof e){j.push.apply(j,g?i.v.slice().reverse():i.v)}else{j.push(i)}}}return f}if(h instanceof Array){if(g){for(k=h.length;--k>=0;){if(n()){break}}j.reverse();m.reverse()}else{for(k=0;k<h.length;++k){if(n()){break}}}}else{for(k in h){if(h.hasOwnProperty(k)){if(n()){break}}}}return m.concat(j)}c.at_top=function(f){return new a(f)};c.splice=function(f){return new e(f)};c.last=function(f){return new b(f)};var d=c.skip={};function a(f){this.v=f}function e(f){this.v=f}function b(f){this.v=f}return c})();function push_uniq(b,a){if(b.indexOf(a)<0){b.push(a)}}function string_template(b,a){return b.replace(/\{(.+?)\}/g,function(d,c){return a[c]})}function remove(c,b){for(var a=c.length;--a>=0;){if(c[a]===b){c.splice(a,1)}}}function mergeSort(d,a){if(d.length<2){return d.slice()}function c(g,f){var k=[],e=0,h=0,j=0;while(e<g.length&&h<f.length){a(g[e],f[h])<=0?k[j++]=g[e++]:k[j++]=f[h++]}if(e<g.length){k.push.apply(k,g.slice(e))}if(h<f.length){k.push.apply(k,f.slice(h))}return k}function b(f){if(f.length<=1){return f}var e=Math.floor(f.length/2),h=f.slice(0,e),g=f.slice(e);h=b(h);g=b(g);return c(h,g)}return b(d)}function set_difference(d,c){return d.filter(function(a){return c.indexOf(a)<0})}function set_intersection(d,c){return d.filter(function(a){return c.indexOf(a)>=0})}function makePredicate(h){if(!(h instanceof Array)){h=h.split(" ")}var g="",d=[];out:for(var e=0;e<h.length;++e){for(var c=0;c<d.length;++c){if(d[c][0].length==h[e].length){d[c].push(h[e]);continue out}}d.push([h[e]])}function b(f){if(f.length==1){return g+="return str === "+JSON.stringify(f[0])+";"}g+="switch(str){";for(var j=0;j<f.length;++j){g+="case "+JSON.stringify(f[j])+":"}g+="return true}return false;"}if(d.length>3){d.sort(function(i,f){return f.length-i.length});g+="switch(str.length){";for(var e=0;e<d.length;++e){var a=d[e];g+="case "+a[0].length+":";b(a)}g+="}"}else{b(h)}return new Function("str",g)}function all(c,a){for(var b=c.length;--b>=0;){if(!a(c[b])){return false}}return true}function Dictionary(){this._values=Object.create(null);this._size=0}Dictionary.prototype={set:function(a,b){if(!this.has(a)){++this._size}this._values["$"+a]=b;return this},add:function(a,b){if(this.has(a)){this.get(a).push(b)}else{this.set(a,[b])}return this},get:function(a){return this._values["$"+a]},del:function(a){if(this.has(a)){--this._size;delete this._values["$"+a]}return this},has:function(a){return("$"+a) in this._values},each:function(b){for(var a in this._values){b(this._values[a],a.substr(1))}},size:function(){return this._size},map:function(c){var a=[];for(var b in this._values){a.push(c(this._values[b],b.substr(1)))}return a}};"use strict";function DEFNODE(g,h,c,a){if(arguments.length<4){a=AST_Node}if(!h){h=[]}else{h=h.split(/\s+/)}var f=h;if(a&&a.PROPS){h=h.concat(a.PROPS)}var b="return function AST_"+g+"(props){ if (props) { ";for(var d=h.length;--d>=0;){b+="this."+h[d]+" = props."+h[d]+";"}var e=a&&new a;if(e&&e.initialize||(c&&c.initialize)){b+="this.initialize();"}b+="}}";var j=new Function(b)();if(e){j.prototype=e;j.BASE=a}if(a){a.SUBCLASSES.push(j)}j.prototype.CTOR=j;j.PROPS=h||null;j.SELF_PROPS=f;j.SUBCLASSES=[];if(g){j.prototype.TYPE=j.TYPE=g}if(c){for(d in c){if(c.hasOwnProperty(d)){if(/^\$/.test(d)){j[d.substr(1)]=c[d]}else{j.prototype[d]=c[d]}}}}j.DEFMETHOD=function(i,k){this.prototype[i]=k};return j}var AST_Token=DEFNODE("Token","type value line col pos endpos nlb comments_before file",{},null);var AST_Node=DEFNODE("Node","start end",{clone:function(){return new this.CTOR(this)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},_walk:function(a){return a._visit(this)},walk:function(a){return this._walk(a)}},null);AST_Node.warn_function=null;AST_Node.warn=function(a,b){if(AST_Node.warn_function){AST_Node.warn_function(string_template(a,b))}};var AST_Statement=DEFNODE("Statement",null,{$documentation:"Base class of all statements",});var AST_Debugger=DEFNODE("Debugger",null,{$documentation:"Represents a debugger statement",},AST_Statement);var AST_Directive=DEFNODE("Directive","value scope",{$documentation:'Represents a directive, like "use strict";',$propdoc:{value:"[string] The value of this directive as a plain string (it's not an AST_String!)",scope:"[AST_Scope/S] The scope that this directive affects"},},AST_Statement);var AST_SimpleStatement=DEFNODE("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_walk:function(a){return a._visit(this,function(){this.body._walk(a)})}},AST_Statement);function walk_body(a,b){if(a.body instanceof AST_Statement){a.body._walk(b)}else{a.body.forEach(function(c){c._walk(b)})}}var AST_Block=DEFNODE("Block","body",{$documentation:"A body of statements (usually bracketed)",$propdoc:{body:"[AST_Statement*] an array of statements"},_walk:function(a){return a._visit(this,function(){walk_body(this,a)})}},AST_Statement);var AST_BlockStatement=DEFNODE("BlockStatement",null,{$documentation:"A block statement",},AST_Block);var AST_EmptyStatement=DEFNODE("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_walk:function(a){return a._visit(this)}},AST_Statement);var AST_StatementWithBody=DEFNODE("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_walk:function(a){return a._visit(this,function(){this.body._walk(a)})}},AST_Statement);var AST_LabeledStatement=DEFNODE("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_walk:function(a){return a._visit(this,function(){this.label._walk(a);this.body._walk(a)})}},AST_StatementWithBody);var AST_IterationStatement=DEFNODE("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it."},AST_StatementWithBody);var AST_DWLoop=DEFNODE("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_walk:function(a){return a._visit(this,function(){this.condition._walk(a);this.body._walk(a)})}},AST_IterationStatement);var AST_Do=DEFNODE("Do",null,{$documentation:"A `do` statement",},AST_DWLoop);var AST_While=DEFNODE("While",null,{$documentation:"A `while` statement",},AST_DWLoop);var AST_For=DEFNODE("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_walk:function(a){return a._visit(this,function(){if(this.init){this.init._walk(a)}if(this.condition){this.condition._walk(a)}if(this.step){this.step._walk(a)}this.body._walk(a)})}},AST_IterationStatement);var AST_ForIn=DEFNODE("ForIn","init name object",{$documentation:"A `for ... in` statement",$propdoc:{init:"[AST_Node] the `for/in` initialization code",name:"[AST_SymbolRef?] the loop variable, only if `init` is AST_Var",object:"[AST_Node] the object that we're looping through"},_walk:function(a){return a._visit(this,function(){this.init._walk(a);this.object._walk(a);this.body._walk(a)})}},AST_IterationStatement);var AST_With=DEFNODE("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_walk:function(a){return a._visit(this,function(){this.expression._walk(a);this.body._walk(a)})}},AST_StatementWithBody);var AST_Scope=DEFNODE("Scope","directives variables functions uses_with uses_eval parent_scope enclosed cname",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{directives:"[string*/S] an array of directives declared in this scope",variables:"[Object/S] a map of name -> SymbolDef for all variables/functions defined in this scope",functions:"[Object/S] like `variables`, but only lists function declarations",uses_with:"[boolean/S] tells whether this scope uses the `with` statement",uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",parent_scope:"[AST_Scope?/S] link to the parent scope",enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",cname:"[integer/S] current index for mangling variables (used internally by the mangler)",},},AST_Block);var AST_Toplevel=DEFNODE("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Object/S] a map of name -> SymbolDef for all undeclared names",},wrap_enclose:function(c){var a=this;var b=[];var d=[];c.forEach(function(g){var h=g.lastIndexOf(":");b.push(g.substr(0,h));d.push(g.substr(h+1))});var f="(function("+d.join(",")+"){ '$ORIG'; })("+b.join(",")+")";f=parse(f);f=f.transform(new TreeTransformer(function e(g){if(g instanceof AST_Directive&&g.value=="$ORIG"){return MAP.splice(a.body)}}));return f},wrap_commonjs:function(c,d){var b=this;var a=[];if(d){b.figure_out_scope();b.walk(new TreeWalker(function(g){if(g instanceof AST_SymbolDeclaration&&g.definition().global){if(!find_if(function(h){return h.name==g.name},a)){a.push(g)}}}))}var f="(function(exports, global){ global['"+c+"'] = exports; '$ORIG'; '$EXPORTS'; }({}, (function(){return this}())))";f=parse(f);f=f.transform(new TreeTransformer(function e(h){if(h instanceof AST_SimpleStatement){h=h.body;if(h instanceof AST_String){switch(h.getValue()){case"$ORIG":return MAP.splice(b.body);case"$EXPORTS":var g=[];a.forEach(function(i){g.push(new AST_SimpleStatement({body:new AST_Assign({left:new AST_Sub({expression:new AST_SymbolRef({name:"exports"}),property:new AST_String({value:i.name}),}),operator:"=",right:new AST_SymbolRef(i),}),}))});return MAP.splice(g)}}}}));return f}},AST_Scope);var AST_Lambda=DEFNODE("Lambda","name argnames uses_arguments",{$documentation:"Base class for functions",$propdoc:{name:"[AST_SymbolDeclaration?] the name of this function",argnames:"[AST_SymbolFunarg*] array of function arguments",uses_arguments:"[boolean/S] tells whether this function accesses the arguments array"},_walk:function(a){return a._visit(this,function(){if(this.name){this.name._walk(a)}this.argnames.forEach(function(b){b._walk(a)});walk_body(this,a)})}},AST_Scope);var AST_Accessor=DEFNODE("Accessor",null,{$documentation:"A setter/getter function.  The `name` property is always null."},AST_Lambda);var AST_Function=DEFNODE("Function",null,{$documentation:"A function expression"},AST_Lambda);var AST_Defun=DEFNODE("Defun",null,{$documentation:"A function definition"},AST_Lambda);var AST_Jump=DEFNODE("Jump",null,{$documentation:"Base class for “jumps�? (for now that's `return`, `throw`, `break` and `continue`)"},AST_Statement);var AST_Exit=DEFNODE("Exit","value",{$documentation:"Base class for “exits�? (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_walk:function(a){return a._visit(this,this.value&&function(){this.value._walk(a)})}},AST_Jump);var AST_Return=DEFNODE("Return",null,{$documentation:"A `return` statement"},AST_Exit);var AST_Throw=DEFNODE("Throw",null,{$documentation:"A `throw` statement"},AST_Exit);var AST_LoopControl=DEFNODE("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none",},_walk:function(a){return a._visit(this,this.label&&function(){this.label._walk(a)})}},AST_Jump);var AST_Break=DEFNODE("Break",null,{$documentation:"A `break` statement"},AST_LoopControl);var AST_Continue=DEFNODE("Continue",null,{$documentation:"A `continue` statement"},AST_LoopControl);var AST_If=DEFNODE("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_walk:function(a){return a._visit(this,function(){this.condition._walk(a);this.body._walk(a);if(this.alternative){this.alternative._walk(a)}})}},AST_StatementWithBody);var AST_Switch=DEFNODE("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant�?"},_walk:function(a){return a._visit(this,function(){this.expression._walk(a);walk_body(this,a)})}},AST_Block);var AST_SwitchBranch=DEFNODE("SwitchBranch",null,{$documentation:"Base class for `switch` branches",},AST_Block);var AST_Default=DEFNODE("Default",null,{$documentation:"A `default` switch branch",},AST_SwitchBranch);var AST_Case=DEFNODE("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_walk:function(a){return a._visit(this,function(){this.expression._walk(a);walk_body(this,a)})}},AST_SwitchBranch);var AST_Try=DEFNODE("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_walk:function(a){return a._visit(this,function(){walk_body(this,a);if(this.bcatch){this.bcatch._walk(a)}if(this.bfinally){this.bfinally._walk(a)}})}},AST_Block);var AST_Catch=DEFNODE("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[AST_SymbolCatch] symbol for the exception"},_walk:function(a){return a._visit(this,function(){this.argname._walk(a);walk_body(this,a)})}},AST_Block);var AST_Finally=DEFNODE("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},AST_Block);var AST_Definitions=DEFNODE("Definitions","definitions",{$documentation:"Base class for `var` or `const` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_walk:function(a){return a._visit(this,function(){this.definitions.forEach(function(b){b._walk(a)})})}},AST_Statement);var AST_Var=DEFNODE("Var",null,{$documentation:"A `var` statement"},AST_Definitions);var AST_Const=DEFNODE("Const",null,{$documentation:"A `const` statement"},AST_Definitions);var AST_VarDef=DEFNODE("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_SymbolVar|AST_SymbolConst] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_walk:function(a){return a._visit(this,function(){this.name._walk(a);if(this.value){this.value._walk(a)}})}});var AST_Call=DEFNODE("Call","expression args",{$documentation:"A function call expression",$propdoc:{expression:"[AST_Node] expression to invoke as function",args:"[AST_Node*] array of arguments"},_walk:function(a){return a._visit(this,function(){this.expression._walk(a);this.args.forEach(function(b){b._walk(a)})})}});var AST_New=DEFNODE("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties"},AST_Call);var AST_Seq=DEFNODE("Seq","car cdr",{$documentation:"A sequence expression (two comma-separated expressions)",$propdoc:{car:"[AST_Node] first element in sequence",cdr:"[AST_Node] second element in sequence"},$cons:function(a,c){var b=new AST_Seq(a);b.car=a;b.cdr=c;return b},$from_array:function(d){if(d.length==0){return null}if(d.length==1){return d[0].clone()}var b=null;for(var a=d.length;--a>=0;){b=AST_Seq.cons(d[a],b)}var c=b;while(c){if(c.cdr&&!c.cdr.cdr){c.cdr=c.cdr.car;break}c=c.cdr}return b},to_array:function(){var c=this,b=[];while(c){b.push(c.car);if(c.cdr&&!(c.cdr instanceof AST_Seq)){b.push(c.cdr);break}c=c.cdr}return b},add:function(b){var c=this;while(c){if(!(c.cdr instanceof AST_Seq)){var a=AST_Seq.cons(c.cdr,b);return c.cdr=a}c=c.cdr}},_walk:function(a){return a._visit(this,function(){this.car._walk(a);if(this.cdr){this.cdr._walk(a)}})}});var AST_PropAccess=DEFNODE("PropAccess","expression property",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container�? expression",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node"}});var AST_Dot=DEFNODE("Dot",null,{$documentation:"A dotted property access expression",_walk:function(a){return a._visit(this,function(){this.expression._walk(a)})}},AST_PropAccess);var AST_Sub=DEFNODE("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',_walk:function(a){return a._visit(this,function(){this.expression._walk(a);this.property._walk(a)})}},AST_PropAccess);var AST_Unary=DEFNODE("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_walk:function(a){return a._visit(this,function(){this.expression._walk(a)})}});var AST_UnaryPrefix=DEFNODE("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},AST_Unary);var AST_UnaryPostfix=DEFNODE("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},AST_Unary);var AST_Binary=DEFNODE("Binary","left operator right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_walk:function(a){return a._visit(this,function(){this.left._walk(a);this.right._walk(a)})}});var AST_Conditional=DEFNODE("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_walk:function(a){return a._visit(this,function(){this.condition._walk(a);this.consequent._walk(a);this.alternative._walk(a)})}});var AST_Assign=DEFNODE("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",},AST_Binary);var AST_Array=DEFNODE("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_walk:function(a){return a._visit(this,function(){this.elements.forEach(function(b){b._walk(a)})})}});var AST_Object=DEFNODE("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[AST_ObjectProperty*] array of properties"},_walk:function(a){return a._visit(this,function(){this.properties.forEach(function(b){b._walk(a)})})}});var AST_ObjectProperty=DEFNODE("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string] the property name converted to a string for ObjectKeyVal.  For setters and getters this is an arbitrary AST_Node.",value:"[AST_Node] property value.  For setters and getters this is an AST_Function."},_walk:function(a){return a._visit(this,function(){this.value._walk(a)})}});var AST_ObjectKeyVal=DEFNODE("ObjectKeyVal",null,{$documentation:"A key: value object property",},AST_ObjectProperty);var AST_ObjectSetter=DEFNODE("ObjectSetter",null,{$documentation:"An object setter property",},AST_ObjectProperty);var AST_ObjectGetter=DEFNODE("ObjectGetter",null,{$documentation:"An object getter property",},AST_ObjectProperty);var AST_Symbol=DEFNODE("Symbol","scope name thedef",{$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},$documentation:"Base class for all symbols",});var AST_SymbolAccessor=DEFNODE("SymbolAccessor",null,{$documentation:"The name of a property accessor (setter/getter function)"},AST_Symbol);var AST_SymbolDeclaration=DEFNODE("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var/const, function name or argument, symbol in catch)",$propdoc:{init:"[AST_Node*/S] array of initializers for this declaration."}},AST_Symbol);var AST_SymbolVar=DEFNODE("SymbolVar",null,{$documentation:"Symbol defining a variable",},AST_SymbolDeclaration);var AST_SymbolConst=DEFNODE("SymbolConst",null,{$documentation:"A constant declaration"},AST_SymbolDeclaration);var AST_SymbolFunarg=DEFNODE("SymbolFunarg",null,{$documentation:"Symbol naming a function argument",},AST_SymbolVar);var AST_SymbolDefun=DEFNODE("SymbolDefun",null,{$documentation:"Symbol defining a function",},AST_SymbolDeclaration);var AST_SymbolLambda=DEFNODE("SymbolLambda",null,{$documentation:"Symbol naming a function expression",},AST_SymbolDeclaration);var AST_SymbolCatch=DEFNODE("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch",},AST_SymbolDeclaration);var AST_Label=DEFNODE("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[];this.thedef=this}},AST_Symbol);var AST_SymbolRef=DEFNODE("SymbolRef",null,{$documentation:"Reference to some symbol (not definition/declaration)",},AST_Symbol);var AST_LabelRef=DEFNODE("LabelRef",null,{$documentation:"Reference to a label symbol",},AST_Symbol);var AST_This=DEFNODE("This",null,{$documentation:"The `this` symbol",},AST_Symbol);var AST_Constant=DEFNODE("Constant",null,{$documentation:"Base class for all constants",getValue:function(){return this.value}});var AST_String=DEFNODE("String","value",{$documentation:"A string literal",$propdoc:{value:"[string] the contents of this string"}},AST_Constant);var AST_Number=DEFNODE("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"}},AST_Constant);var AST_RegExp=DEFNODE("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"}},AST_Constant);var AST_Atom=DEFNODE("Atom",null,{$documentation:"Base class for atoms",},AST_Constant);var AST_Null=DEFNODE("Null",null,{$documentation:"The `null` atom",value:null},AST_Atom);var AST_NaN=DEFNODE("NaN",null,{$documentation:"The impossible value",value:0/0},AST_Atom);var AST_Undefined=DEFNODE("Undefined",null,{$documentation:"The `undefined` value",value:(function(){}())},AST_Atom);var AST_Hole=DEFNODE("Hole",null,{$documentation:"A hole in an array",value:(function(){}())},AST_Atom);var AST_Infinity=DEFNODE("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},AST_Atom);var AST_Boolean=DEFNODE("Boolean",null,{$documentation:"Base class for booleans",},AST_Atom);var AST_False=DEFNODE("False",null,{$documentation:"The `false` atom",value:false},AST_Boolean);var AST_True=DEFNODE("True",null,{$documentation:"The `true` atom",value:true},AST_Boolean);function TreeWalker(a){this.visit=a;this.stack=[]}TreeWalker.prototype={_visit:function(c,b){this.stack.push(c);var a=this.visit(c,b?function(){b.call(c)}:noop);if(!a&&b){b.call(c)}this.stack.pop();return a},parent:function(a){return this.stack[this.stack.length-2-(a||0)]},push:function(a){this.stack.push(a)},pop:function(){return this.stack.pop()},self:function(){return this.stack[this.stack.length-1]},find_parent:function(d){var b=this.stack;for(var c=b.length;--c>=0;){var a=b[c];if(a instanceof d){return a}}},has_directive:function(a){return this.find_parent(AST_Scope).has_directive(a)},in_boolean_context:function(){var a=this.stack;var c=a.length,b=a[--c];while(c>0){var d=a[--c];if((d instanceof AST_If&&d.condition===b)||(d instanceof AST_Conditional&&d.condition===b)||(d instanceof AST_DWLoop&&d.condition===b)||(d instanceof AST_For&&d.condition===b)||(d instanceof AST_UnaryPrefix&&d.operator=="!"&&d.expression===b)){return true}if(!(d instanceof AST_Binary&&(d.operator=="&&"||d.operator=="||"))){return false}b=d}},loopcontrol_target:function(c){var b=this.stack;if(c){for(var d=b.length;--d>=0;){var a=b[d];if(a instanceof AST_LabeledStatement&&a.label.name==c.name){return a.body}}}else{for(var d=b.length;--d>=0;){var a=b[d];if(a instanceof AST_Switch||a instanceof AST_IterationStatement){return a}}}}};"use strict";var KEYWORDS="break case catch const continue debugger default delete do else finally for function if in instanceof new return switch throw try typeof var void while with";var KEYWORDS_ATOM="false null true";var RESERVED_WORDS="abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized this throws transient volatile yield "+KEYWORDS_ATOM+" "+KEYWORDS;var KEYWORDS_BEFORE_EXPRESSION="return new delete throw else case";KEYWORDS=makePredicate(KEYWORDS);RESERVED_WORDS=makePredicate(RESERVED_WORDS);KEYWORDS_BEFORE_EXPRESSION=makePredicate(KEYWORDS_BEFORE_EXPRESSION);KEYWORDS_ATOM=makePredicate(KEYWORDS_ATOM);var OPERATOR_CHARS=makePredicate(characters("+-*&%=<>!?|~^"));var RE_HEX_NUMBER=/^0x[0-9a-f]+$/i;var RE_OCT_NUMBER=/^0[0-7]+$/;var RE_DEC_NUMBER=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i;var OPERATORS=makePredicate(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]);var WHITESPACE_CHARS=makePredicate(characters(" \u00a0\n\r\t\f\u000b\u200b\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000"));var PUNC_BEFORE_EXPRESSION=makePredicate(characters("[{(,.;:"));var PUNC_CHARS=makePredicate(characters("[]{}(),;:"));var REGEXP_MODIFIERS=makePredicate(characters("gmsiy"));var UNICODE={letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0523\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971\\u0972\\u097B-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D3D\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC\\u0EDD\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8B\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10D0-\\u10FA\\u10FC\\u1100-\\u1159\\u115F-\\u11A2\\u11A8-\\u11F9\\u1200-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u1676\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19A9\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u2094\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2C6F\\u2C71-\\u2C7D\\u2C80-\\u2CE4\\u2D00-\\u2D25\\u2D30-\\u2D65\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31B7\\u31F0-\\u31FF\\u3400\\u4DB5\\u4E00\\u9FC3\\uA000-\\uA48C\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA65F\\uA662-\\uA66E\\uA67F-\\uA697\\uA717-\\uA71F\\uA722-\\uA788\\uA78B\\uA78C\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA90A-\\uA925\\uA930-\\uA946\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAC00\\uD7A3\\uF900-\\uFA2D\\uFA30-\\uFA6A\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")};function is_letter(a){return(a>=97&&a<=122)||(a>=65&&a<=90)||(a>=170&&UNICODE.letter.test(String.fromCharCode(a)))}function is_digit(a){return a>=48&&a<=57}function is_alphanumeric_char(a){return is_digit(a)||is_letter(a)}function is_unicode_combining_mark(a){return UNICODE.non_spacing_mark.test(a)||UNICODE.space_combining_mark.test(a)}function is_unicode_connector_punctuation(a){return UNICODE.connector_punctuation.test(a)}function is_identifier(a){return !RESERVED_WORDS(a)&&/^[a-z_$][a-z0-9_$]*$/i.test(a)}function is_identifier_start(a){return a==36||a==95||is_letter(a)}function is_identifier_char(a){var b=a.charCodeAt(0);return is_identifier_start(b)||is_digit(b)||b==8204||b==8205||is_unicode_combining_mark(a)||is_unicode_connector_punctuation(a)}function is_identifier_string(a){return/^[a-z_$][a-z0-9_$]*$/i.test(a)}function parse_js_number(a){if(RE_HEX_NUMBER.test(a)){return parseInt(a.substr(2),16)}else{if(RE_OCT_NUMBER.test(a)){return parseInt(a.substr(1),8)}else{if(RE_DEC_NUMBER.test(a)){return parseFloat(a)}}}}function JS_Parse_Error(c,a,b,d){this.message=c;this.line=a;this.col=b;this.pos=d;this.stack=new Error().stack}JS_Parse_Error.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")\n\n"+this.stack};function js_error(d,b,a,c,e){throw new JS_Parse_Error(d,a,c,e)}function is_token(a,b,c){return a.type==b&&(c==null||a.value==c)}var EX_EOF={};function tokenizer(b,w,n){var f={text:b.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/\uFEFF/g,""),filename:w,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:false,regex_allowed:false,comments_before:[]};function u(){return f.text.charAt(f.pos)}function t(D,E){var F=f.text.charAt(f.pos++);if(D&&!F){throw EX_EOF}if(F=="\n"){f.newline_before=f.newline_before||!E;++f.line;f.col=0}else{++f.col}return F}function o(D){while(D-->0){t()}}function y(D){return f.text.substr(f.pos,D.length)==D}function r(E,D){var F=f.text.indexOf(E,f.pos);if(D&&F==-1){throw EX_EOF}return F}function q(){f.tokline=f.line;f.tokcol=f.col;f.tokpos=f.pos}var B=false;function j(H,I,G){f.regex_allowed=((H=="operator"&&!UNARY_POSTFIX(I))||(H=="keyword"&&KEYWORDS_BEFORE_EXPRESSION(I))||(H=="punc"&&PUNC_BEFORE_EXPRESSION(I)));B=(H=="punc"&&I==".");var E={type:H,value:I,line:f.tokline,col:f.tokcol,pos:f.tokpos,endpos:f.pos,nlb:f.newline_before,file:w};if(!G){E.comments_before=f.comments_before;f.comments_before=[];for(var F=0,D=E.comments_before.length;F<D;F++){E.nlb=E.nlb||E.comments_before[F].nlb}}f.newline_before=false;return new AST_Token(E)}function C(){while(WHITESPACE_CHARS(u())){t()}}function l(D){var E="",G,F=0;while((G=u())&&D(G,F++)){E+=t()}return E}function v(D){js_error(D,w,f.tokline,f.tokcol,f.tokpos)}function p(I){var G=false,E=false,J=false,D=I==".";var F=l(function(L,K){var M=L.charCodeAt(0);switch(M){case 120:case 88:return J?false:(J=true);case 101:case 69:return J?true:G?false:(G=E=true);case 45:return E||(K==0&&!I);case 43:return E;case (E=false,46):return(!D&&!J&&!G)?(D=true):false}return is_alphanumeric_char(M)});if(I){F=I+F}var H=parse_js_number(F);if(!isNaN(H)){return j("num",H)}else{v("Invalid syntax: "+F)}}function s(D){var E=t(true,D);switch(E.charCodeAt(0)){case 110:return"\n";case 114:return"\r";case 116:return"\t";case 98:return"\b";case 118:return"\u000b";case 102:return"\f";case 48:return"\0";case 120:return String.fromCharCode(k(2));case 117:return String.fromCharCode(k(4));case 10:return"";default:return E}}function k(F){var D=0;for(;F>0;--F){var E=parseInt(t(true),16);if(isNaN(E)){v("Invalid hex-character pattern in string")}D=(D<<4)|E}return D}var e=g("Unterminated string constant",function(){var D=t(),E="";for(;;){var F=t(true);if(F=="\\"){var H=0,G=null;F=l(function(I){if(I>="0"&&I<="7"){if(!G){G=I;return ++H}else{if(G<="3"&&H<=2){return ++H}else{if(G>="4"&&H<=1){return ++H}}}}return false});if(H>0){F=String.fromCharCode(parseInt(F,8))}else{F=s(true)}}else{if(F==D){break}}E+=F}return j("string",E)});function x(G){var E=f.regex_allowed;var F=r("\n"),D;if(F==-1){D=f.text.substr(f.pos);f.pos=f.text.length}else{D=f.text.substring(f.pos,F);f.pos=F}f.comments_before.push(j(G,D,true));f.regex_allowed=E;return m()}var A=g("Unterminated multiline comment",function(){var E=f.regex_allowed;var F=r("*/",true);var H=f.text.substring(f.pos,F);var D=H.split("\n"),I=D.length;f.pos=F+2;f.line+=I-1;if(I>1){f.col=D[I-1].length}else{f.col+=D[I-1].length}f.col+=2;var G=f.newline_before=f.newline_before||H.indexOf("\n")>=0;f.comments_before.push(j("comment2",H,true));f.regex_allowed=E;f.newline_before=G;return m()});function i(){var H=false,D="",E,G=false,F;while((E=u())!=null){if(!H){if(E=="\\"){G=H=true,t()}else{if(is_identifier_char(E)){D+=t()}else{break}}}else{if(E!="u"){v("Expecting UnicodeEscapeSequence -- uXXXX")}E=s();if(!is_identifier_char(E)){v("Unicode char: "+E.charCodeAt(0)+" is not valid in identifier")}D+=E;H=false}}if(KEYWORDS(D)&&G){F=D.charCodeAt(0).toString(16).toUpperCase();D="\\u"+"0000".substr(F.length)+F+D.slice(1)}return D}var c=g("Unterminated regular expression",function(G){var D=false,E,H=false;while((E=t(true))){if(D){G+="\\"+E;D=false}else{if(E=="["){H=true;G+=E}else{if(E=="]"&&H){H=false;G+=E}else{if(E=="/"&&!H){break}else{if(E=="\\"){D=true}else{G+=E}}}}}}var F=i();return j("regexp",new RegExp(G,F))});function z(D){function E(G){if(!u()){return G}var F=G+u();if(OPERATORS(F)){t();return E(F)}else{return G}}return j("operator",E(D||t()))}function h(){t();switch(u()){case"/":t();return x("comment1");case"*":t();return A()}return f.regex_allowed?c(""):z("/")}function a(){t();return is_digit(u().charCodeAt(0))?p("."):j("punc",".")}function d(){var D=i();if(B){return j("name",D)}return KEYWORDS_ATOM(D)?j("atom",D):!KEYWORDS(D)?j("name",D):OPERATORS(D)?j("operator",D):j("keyword",D)}function g(E,D){return function(F){try{return D(F)}catch(G){if(G===EX_EOF){v(E)}else{throw G}}}}function m(F){if(F!=null){return c(F)}C();q();if(n){if(y("<!--")){o(4);return x("comment3")}if(y("-->")&&f.newline_before){o(3);return x("comment4")}}var D=u();if(!D){return j("eof")}var E=D.charCodeAt(0);switch(E){case 34:case 39:return e();case 46:return a();case 47:return h()}if(is_digit(E)){return p()}if(PUNC_CHARS(D)){return j("punc",t())}if(OPERATOR_CHARS(D)){return z()}if(E==92||is_identifier_start(E)){return d()}v("Unexpected character '"+D+"'")}m.context=function(D){if(D){f=D}return f};return m}var UNARY_PREFIX=makePredicate(["typeof","void","delete","--","++","!","~","-","+"]);var UNARY_POSTFIX=makePredicate(["--","++"]);var ASSIGNMENT=makePredicate(["=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="]);var PRECEDENCE=(function(d,f){for(var g=0;g<d.length;++g){var c=d[g];for(var e=0;e<c.length;++e){f[c[e]]=g+1}}return f})([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{});var STATEMENTS_WITH_LABELS=array_to_hash(["for","do","while","switch"]);var ATOMIC_START_TOKEN=array_to_hash(["atom","num","string","regexp","name"]);function parse(e,s){s=defaults(s,{strict:false,filename:null,toplevel:null,expression:false,html5_comments:true,});var k={input:(typeof e=="string"?tokenizer(e,s.filename,s.html5_comments):e),token:null,prev:null,peeked:null,in_function:0,in_directives:true,in_loop:0,labels:[]};k.token=i();function v(S,ab){return is_token(k.token,S,ab)}function m(){return k.peeked||(k.peeked=k.input())}function i(){k.prev=k.token;if(k.peeked){k.token=k.peeked;k.peeked=null}else{k.token=k.input()}k.in_directives=k.in_directives&&(k.token.type=="string"||v("punc",";"));return k.token}function z(){return k.prev}function h(ad,ab,ac,ae){var S=k.input.context();js_error(ad,S.filename,ab!=null?ab:S.tokline,ac!=null?ac:S.tokcol,ae!=null?ae:S.tokpos)}function c(S,ab){h(ab,S.line,S.col)}function J(S){if(S==null){S=k.token}c(S,"Unexpected token: "+S.type+" ("+S.value+")")}function u(S,ab){if(v(S,ab)){return i()}c(k.token,"Unexpected token "+k.token.type+" «"+k.token.value+"», expected "+S+" «"+ab+"»")}function d(S){return u("punc",S)}function B(){return !s.strict&&(k.token.nlb||v("eof")||v("punc","}"))}function V(){if(v("punc",";")){i()}else{if(!B()){J()}}}function l(){d("(");var S=r(true);d(")");return S}function g(S){return function(){var ad=k.token;var ac=S();var ab=z();ac.start=ad;ac.end=ab;return ac}}function y(){if(v("operator","/")||v("operator","/=")){k.peeked=null;k.token=k.input(k.token.value.substr(1))}}var t=g(function(){var ab;y();switch(k.token.type){case"string":var S=k.in_directives,ac=p();if(S&&ac.body instanceof AST_String&&!v("punc",",")){return new AST_Directive({value:ac.body.value})}return ac;case"num":case"regexp":case"operator":case"atom":return p();case"name":return is_token(m(),"punc",":")?T():p();case"punc":switch(k.token.value){case"{":return new AST_BlockStatement({start:k.token,body:o(),end:z()});case"[":case"(":return p();case";":i();return new AST_EmptyStatement();default:J()}case"keyword":switch(ab=k.token.value,i(),ab){case"break":return W(AST_Break);case"continue":return W(AST_Continue);case"debugger":V();return new AST_Debugger();case"do":return new AST_Do({body:j(t),condition:(u("keyword","while"),ab=l(),V(),ab)});case"while":return new AST_While({condition:l(),body:j(t)});case"for":return L();case"function":return A(AST_Defun);case"if":return w();case"return":if(k.in_function==0){h("'return' outside of function")}return new AST_Return({value:(v("punc",";")?(i(),null):B()?null:(ab=r(true),V(),ab))});case"switch":return new AST_Switch({expression:l(),body:j(N)});case"throw":if(k.token.nlb){h("Illegal newline after 'throw'")}return new AST_Throw({value:(ab=r(true),V(),ab)});case"try":return R();case"var":return ab=a(),V(),ab;case"const":return ab=I(),V(),ab;case"with":return new AST_With({expression:l(),body:t()});default:J()}}});function T(){var S=M(AST_Label);if(find_if(function(ac){return ac.name==S.name},k.labels)){h("Label "+S.name+" defined twice")}d(":");k.labels.push(S);var ab=t();k.labels.pop();if(!(ab instanceof AST_IterationStatement)){S.references.forEach(function(ac){if(ac instanceof AST_Continue){ac=ac.label.start;h("Continue label `"+S.name+"` refers to non-IterationStatement.",ac.line,ac.col,ac.pos)}})}return new AST_LabeledStatement({body:ab,label:S})}function p(S){return new AST_SimpleStatement({body:(S=r(true),V(),S)})}function W(ad){var ab=null,S;if(!B()){ab=M(AST_LabelRef,true)}if(ab!=null){S=find_if(function(ae){return ae.name==ab.name},k.labels);if(!S){h("Undefined label "+ab.name)}ab.thedef=S}else{if(k.in_loop==0){h(ad.TYPE+" not inside a loop or switch")}}V();var ac=new ad({label:ab});if(S){S.references.push(ac)}return ac}function L(){d("(");var S=null;if(!v("punc",";")){S=v("keyword","var")?(i(),a(true)):r(true,true);if(v("operator","in")){if(S instanceof AST_Var&&S.definitions.length>1){h("Only one variable declaration allowed in for..in loop")}i();return D(S)}}return H(S)}function H(ab){d(";");var ac=v("punc",";")?null:r(true);d(";");var S=v("punc",")")?null:r(true);d(")");return new AST_For({init:ab,condition:ac,step:S,body:j(t)})}function D(ac){var S=ac instanceof AST_Var?ac.definitions[0].name:null;var ab=r(true);d(")");return new AST_ForIn({init:ac,name:S,object:ab,body:j(t)})}var A=function(ac){var S=ac===AST_Defun;var ab=v("name")?M(S?AST_SymbolDefun:AST_SymbolLambda):null;if(S&&!ab){J()}d("(");return new ac({name:ab,argnames:(function(ae,ad){while(!v("punc",")")){if(ae){ae=false}else{d(",")}ad.push(M(AST_SymbolFunarg))}i();return ad})(true,[]),body:(function(ae,af){++k.in_function;k.in_directives=true;k.in_loop=0;k.labels=[];var ad=o();--k.in_function;k.in_loop=ae;k.labels=af;return ad})(k.in_loop,k.labels)})};function w(){var ac=l(),S=t(),ab=null;if(v("keyword","else")){i();ab=t()}return new AST_If({condition:ac,body:S,alternative:ab})}function o(){d("{");var S=[];while(!v("punc","}")){if(v("eof")){J()}S.push(t())}i();return S}function N(){d("{");var S=[],ad=null,ac=null,ab;while(!v("punc","}")){if(v("eof")){J()}if(v("keyword","case")){if(ac){ac.end=z()}ad=[];ac=new AST_Case({start:(ab=k.token,i(),ab),expression:r(true),body:ad});S.push(ac);d(":")}else{if(v("keyword","default")){if(ac){ac.end=z()}ad=[];ac=new AST_Default({start:(ab=k.token,i(),d(":"),ab),body:ad});S.push(ac)}else{if(!ad){J()}ad.push(t())}}}if(ac){ac.end=z()}i();return S}function R(){var S=o(),ab=null,ad=null;if(v("keyword","catch")){var ae=k.token;i();d("(");var ac=M(AST_SymbolCatch);d(")");ab=new AST_Catch({start:ae,argname:ac,body:o(),end:z()})}if(v("keyword","finally")){var ae=k.token;i();ad=new AST_Finally({start:ae,body:o(),end:z()})}if(!ab&&!ad){h("Missing catch/finally blocks")}return new AST_Try({body:S,bcatch:ab,bfinally:ad})}function b(ac,ab){var S=[];for(;;){S.push(new AST_VarDef({start:k.token,name:M(ab?AST_SymbolConst:AST_SymbolVar),value:v("operator","=")?(i(),r(false,ac)):null,end:z()}));if(!v("punc",",")){break}i()}return S}var a=function(S){return new AST_Var({start:z(),definitions:b(S,false),end:z()})};var I=function(){return new AST_Const({start:z(),definitions:b(false,true),end:z()})};var C=function(){var ac=k.token;u("operator","new");var ab=x(false),S;if(v("punc","(")){i();S=Y(")")}else{S=[]}return E(new AST_New({start:ac,expression:ab,args:S,end:z()}),true)};function K(){var S=k.token,ab;switch(S.type){case"name":case"keyword":ab=Q(AST_SymbolRef);break;case"num":ab=new AST_Number({start:S,end:S,value:S.value});break;case"string":ab=new AST_String({start:S,end:S,value:S.value});break;case"regexp":ab=new AST_RegExp({start:S,end:S,value:S.value});break;case"atom":switch(S.value){case"false":ab=new AST_False({start:S,end:S});break;case"true":ab=new AST_True({start:S,end:S});break;case"null":ab=new AST_Null({start:S,end:S});break}break}i();return ab}var x=function(S){if(v("operator","new")){return C()}var ad=k.token;if(v("punc")){switch(ad.value){case"(":i();var ab=r(true);ab.start=ad;ab.end=k.token;d(")");return E(ab,S);case"[":return E(U(),S);case"{":return E(aa(),S)}J()}if(v("keyword","function")){i();var ac=A(AST_Function);ac.start=ad;ac.end=z();return E(ac,S)}if(ATOMIC_START_TOKEN[k.token.type]){return E(K(),S)}J()};function Y(ac,S,ad){var ae=true,ab=[];while(!v("punc",ac)){if(ae){ae=false}else{d(",")}if(S&&v("punc",ac)){break}if(v("punc",",")&&ad){ab.push(new AST_Hole({start:k.token,end:k.token}))}else{ab.push(r(false))}}i();return ab}var U=g(function(){d("[");return new AST_Array({elements:Y("]",!s.strict,true)})});var aa=g(function(){d("{");var ad=true,S=[];while(!v("punc","}")){if(ad){ad=false}else{d(",")}if(!s.strict&&v("punc","}")){break}var ae=k.token;var ac=ae.type;var ab=q();if(ac=="name"&&!v("punc",":")){if(ab=="get"){S.push(new AST_ObjectGetter({start:ae,key:K(),value:A(AST_Accessor),end:z()}));continue}if(ab=="set"){S.push(new AST_ObjectSetter({start:ae,key:K(),value:A(AST_Accessor),end:z()}));continue}}d(":");S.push(new AST_ObjectKeyVal({start:ae,key:ab,value:r(false),end:z()}))}i();return new AST_Object({properties:S})});function q(){var S=k.token;i();switch(S.type){case"num":case"string":case"name":case"operator":case"keyword":case"atom":return S.value;default:J()}}function O(){var S=k.token;i();switch(S.type){case"name":case"operator":case"keyword":case"atom":return S.value;default:J()}}function Q(ab){var S=k.token.value;return new (S=="this"?AST_This:ab)({name:String(S),start:k.token,end:k.token})}function M(ab,ac){if(!v("name")){if(!ac){h("Name expected")}return null}var S=Q(ab);i();return S}var E=function(ab,S){var ad=ab.start;if(v("punc",".")){i();return E(new AST_Dot({start:ad,expression:ab,property:O(),end:z()}),S)}if(v("punc","[")){i();var ac=r(true);d("]");return E(new AST_Sub({start:ad,expression:ab,property:ac,end:z()}),S)}if(S&&v("punc","(")){i();return E(new AST_Call({start:ad,expression:ab,args:Y(")"),end:z()}),true)}return ab};var G=function(S){var ad=k.token;if(v("operator")&&UNARY_PREFIX(ad.value)){i();y();var ab=f(AST_UnaryPrefix,ad.value,G(S));ab.start=ad;ab.end=z();return ab}var ac=x(S);while(v("operator")&&UNARY_POSTFIX(k.token.value)&&!k.token.nlb){ac=f(AST_UnaryPostfix,k.token.value,ac);ac.start=ad;ac.end=k.token;i()}return ac};function f(S,ac,ab){if((ac=="++"||ac=="--")&&!F(ab)){h("Invalid use of "+ac+" operator")}return new S({operator:ac,expression:ab})}var P=function(ae,ad,S){var af=v("operator")?k.token.value:null;if(af=="in"&&S){af=null}var ab=af!=null?PRECEDENCE[af]:null;if(ab!=null&&ab>ad){i();var ac=P(G(true),ab,S);return P(new AST_Binary({start:ae.start,left:ae,operator:af,right:ac,end:ac.end}),ad,S)}return ae};function n(S){return P(G(true),0,S)}var Z=function(S){var ad=k.token;var ab=n(S);if(v("operator","?")){i();var ac=r(false);d(":");return new AST_Conditional({start:ad,condition:ab,consequent:ac,alternative:r(false,S),end:z()})}return ab};function F(S){if(!s.strict){return true}if(S instanceof AST_This){return false}return(S instanceof AST_PropAccess||S instanceof AST_Symbol)}var X=function(S){var ad=k.token;var ab=Z(S),ac=k.token.value;if(v("operator")&&ASSIGNMENT(ac)){if(F(ab)){i();return new AST_Assign({start:ad,left:ab,operator:ac,right:X(S),end:z()})}h("Invalid assignment")}return ab};var r=function(ab,S){var ad=k.token;var ac=X(S);if(ab&&v("punc",",")){i();return new AST_Seq({start:ad,car:ac,cdr:r(true,S),end:m()})}return ac};function j(S){++k.in_loop;var ab=S();--k.in_loop;return ab}if(s.expression){return r(true)}return(function(){var ad=k.token;var S=[];while(!v("eof")){S.push(t())}var ab=z();var ac=s.toplevel;if(ac){ac.body=ac.body.concat(S);ac.end=ab}else{ac=new AST_Toplevel({start:ad,body:S,end:ab})}return ac})()}"use strict";function TreeTransformer(a,b){TreeWalker.call(this);this.before=a;this.after=b}TreeTransformer.prototype=new TreeWalker;(function(c){function b(e,d){e.DEFMETHOD("transform",function(g,h){var f,i;g.push(this);if(g.before){f=g.before(this,d,h)}if(f===c){if(!g.after){f=this;d(f,g)}else{g.stack[g.stack.length-1]=f=this.clone();d(f,g);i=g.after(f,h);if(i!==c){f=i}}}g.pop();return f})}function a(e,d){return MAP(e,function(f){return f.transform(d,true)})}b(AST_Node,noop);b(AST_LabeledStatement,function(e,d){e.label=e.label.transform(d);e.body=e.body.transform(d)});b(AST_SimpleStatement,function(e,d){e.body=e.body.transform(d)});b(AST_Block,function(e,d){e.body=a(e.body,d)});b(AST_DWLoop,function(e,d){e.condition=e.condition.transform(d);e.body=e.body.transform(d)});b(AST_For,function(e,d){if(e.init){e.init=e.init.transform(d)}if(e.condition){e.condition=e.condition.transform(d)}if(e.step){e.step=e.step.transform(d)}e.body=e.body.transform(d)});b(AST_ForIn,function(e,d){e.init=e.init.transform(d);e.object=e.object.transform(d);e.body=e.body.transform(d)});b(AST_With,function(e,d){e.expression=e.expression.transform(d);e.body=e.body.transform(d)});b(AST_Exit,function(e,d){if(e.value){e.value=e.value.transform(d)}});b(AST_LoopControl,function(e,d){if(e.label){e.label=e.label.transform(d)}});b(AST_If,function(e,d){e.condition=e.condition.transform(d);e.body=e.body.transform(d);if(e.alternative){e.alternative=e.alternative.transform(d)}});b(AST_Switch,function(e,d){e.expression=e.expression.transform(d);e.body=a(e.body,d)});b(AST_Case,function(e,d){e.expression=e.expression.transform(d);e.body=a(e.body,d)});b(AST_Try,function(e,d){e.body=a(e.body,d);if(e.bcatch){e.bcatch=e.bcatch.transform(d)}if(e.bfinally){e.bfinally=e.bfinally.transform(d)}});b(AST_Catch,function(e,d){e.argname=e.argname.transform(d);e.body=a(e.body,d)});b(AST_Definitions,function(e,d){e.definitions=a(e.definitions,d)});b(AST_VarDef,function(e,d){e.name=e.name.transform(d);if(e.value){e.value=e.value.transform(d)}});b(AST_Lambda,function(e,d){if(e.name){e.name=e.name.transform(d)}e.argnames=a(e.argnames,d);e.body=a(e.body,d)});b(AST_Call,function(e,d){e.expression=e.expression.transform(d);e.args=a(e.args,d)});b(AST_Seq,function(e,d){e.car=e.car.transform(d);e.cdr=e.cdr.transform(d)});b(AST_Dot,function(e,d){e.expression=e.expression.transform(d)});b(AST_Sub,function(e,d){e.expression=e.expression.transform(d);e.property=e.property.transform(d)});b(AST_Unary,function(e,d){e.expression=e.expression.transform(d)});b(AST_Binary,function(e,d){e.left=e.left.transform(d);e.right=e.right.transform(d)});b(AST_Conditional,function(e,d){e.condition=e.condition.transform(d);e.consequent=e.consequent.transform(d);e.alternative=e.alternative.transform(d)});b(AST_Array,function(e,d){e.elements=a(e.elements,d)});b(AST_Object,function(e,d){e.properties=a(e.properties,d)});b(AST_ObjectProperty,function(e,d){e.value=e.value.transform(d)})})();"use strict";function SymbolDef(b,a,c){this.name=c.name;this.orig=[c];this.scope=b;this.references=[];this.global=false;this.mangled_name=null;this.undeclared=false;this.constant=false;this.index=a}SymbolDef.prototype={unmangleable:function(options){return(this.global&&!(options&&options.toplevel))||this.undeclared||(!(options&&options.eval)&&(this.scope.uses_eval||this.scope.uses_with))},mangle:function(a){if(!this.mangled_name&&!this.unmangleable(a)){var b=this.scope;if(!a.screw_ie8&&this.orig[0] instanceof AST_SymbolLambda){b=b.parent_scope}this.mangled_name=b.next_mangled(a,this)}}};AST_Toplevel.DEFMETHOD("figure_out_scope",function(d){d=defaults(d,{screw_ie8:false});var c=this;var e=c.parent_scope=null;var a=null;var h=0;var b=new TreeWalker(function(m,l){if(d.screw_ie8&&m instanceof AST_Catch){var j=e;e=new AST_Scope(m);e.init_scope_vars(h);e.parent_scope=j;l();e=j;return true}if(m instanceof AST_Scope){m.init_scope_vars(h);var j=m.parent_scope=e;var i=a;a=e=m;++h;l();--h;e=j;a=i;return true}if(m instanceof AST_Directive){m.scope=e;push_uniq(e.directives,m.value);return true}if(m instanceof AST_With){for(var k=e;k;k=k.parent_scope){k.uses_with=true}return}if(m instanceof AST_Symbol){m.scope=e}if(m instanceof AST_SymbolLambda){a.def_function(m)}else{if(m instanceof AST_SymbolDefun){(m.scope=a.parent_scope).def_function(m)}else{if(m instanceof AST_SymbolVar||m instanceof AST_SymbolConst){var n=a.def_variable(m);n.constant=m instanceof AST_SymbolConst;n.init=b.parent().value}else{if(m instanceof AST_SymbolCatch){(d.screw_ie8?e:a).def_variable(m)}}}}});c.walk(b);var g=null;var f=c.globals=new Dictionary();var b=new TreeWalker(function(n,l){if(n instanceof AST_Lambda){var o=g;g=n;l();g=o;return true}if(n instanceof AST_SymbolRef){var j=n.name;var i=n.scope.find_variable(j);if(!i){var m;if(f.has(j)){m=f.get(j)}else{m=new SymbolDef(c,f.size(),n);m.undeclared=true;m.global=true;f.set(j,m)}n.thedef=m;if(j=="eval"&&b.parent() instanceof AST_Call){for(var k=n.scope;k&&!k.uses_eval;k=k.parent_scope){k.uses_eval=true}}if(g&&j=="arguments"){g.uses_arguments=true}}else{n.thedef=i}n.reference();return true}});c.walk(b)});AST_Scope.DEFMETHOD("init_scope_vars",function(a){this.directives=[];this.variables=new Dictionary();this.functions=new Dictionary();this.uses_with=false;this.uses_eval=false;this.parent_scope=null;this.enclosed=[];this.cname=-1;this.nesting=a});AST_Scope.DEFMETHOD("strict",function(){return this.has_directive("use strict")});AST_Lambda.DEFMETHOD("init_scope_vars",function(){AST_Scope.prototype.init_scope_vars.apply(this,arguments);this.uses_arguments=false});AST_SymbolRef.DEFMETHOD("reference",function(){var b=this.definition();b.references.push(this);var a=this.scope;while(a){push_uniq(a.enclosed,b);if(a===b.scope){break}a=a.parent_scope}this.frame=this.scope.nesting-b.scope.nesting});AST_Scope.DEFMETHOD("find_variable",function(a){if(a instanceof AST_Symbol){a=a.name}return this.variables.get(a)||(this.parent_scope&&this.parent_scope.find_variable(a))});AST_Scope.DEFMETHOD("has_directive",function(a){return this.parent_scope&&this.parent_scope.has_directive(a)||(this.directives.indexOf(a)>=0?this:null)});AST_Scope.DEFMETHOD("def_function",function(a){this.functions.set(a.name,this.def_variable(a))});AST_Scope.DEFMETHOD("def_variable",function(b){var a;if(!this.variables.has(b.name)){a=new SymbolDef(this,this.variables.size(),b);this.variables.set(b.name,a);a.global=!this.parent_scope}else{a=this.variables.get(b.name);a.orig.push(b)}return b.thedef=a});AST_Scope.DEFMETHOD("next_mangled",function(d){var f=this.enclosed;out:while(true){var a=base54(++this.cname);if(!is_identifier(a)){continue}if(d.except.indexOf(a)>=0){continue}for(var e=f.length;--e>=0;){var b=f[e];var c=b.mangled_name||(b.unmangleable(d)&&b.name);if(a==c){continue out}}return a}});AST_Function.DEFMETHOD("next_mangled",function(b,d){var c=d.orig[0] instanceof AST_SymbolFunarg&&this.name&&this.name.definition();while(true){var a=AST_Lambda.prototype.next_mangled.call(this,b,d);if(!(c&&c.mangled_name==a)){return a}}});AST_Scope.DEFMETHOD("references",function(a){if(a instanceof AST_Symbol){a=a.definition()}return this.enclosed.indexOf(a)<0?null:a});AST_Symbol.DEFMETHOD("unmangleable",function(a){return this.definition().unmangleable(a)});AST_SymbolAccessor.DEFMETHOD("unmangleable",function(){return true});AST_Label.DEFMETHOD("unmangleable",function(){return false});AST_Symbol.DEFMETHOD("unreferenced",function(){return this.definition().references.length==0&&!(this.scope.uses_eval||this.scope.uses_with)});AST_Symbol.DEFMETHOD("undeclared",function(){return this.definition().undeclared});AST_LabelRef.DEFMETHOD("undeclared",function(){return false});AST_Label.DEFMETHOD("undeclared",function(){return false});AST_Symbol.DEFMETHOD("definition",function(){return this.thedef});AST_Symbol.DEFMETHOD("global",function(){return this.definition().global});AST_Toplevel.DEFMETHOD("_default_mangler_options",function(options){return defaults(options,{except:[],eval:false,sort:false,toplevel:false,screw_ie8:false})});AST_Toplevel.DEFMETHOD("mangle_names",function(c){c=this._default_mangler_options(c);var b=-1;var d=[];var a=new TreeWalker(function(i,h){if(i instanceof AST_LabeledStatement){var g=b;h();b=g;return true}if(i instanceof AST_Scope){var j=a.parent(),e=[];i.variables.each(function(k){if(c.except.indexOf(k.name)<0){e.push(k)}});if(c.sort){e.sort(function(l,k){return k.references.length-l.references.length})}d.push.apply(d,e);return}if(i instanceof AST_Label){var f;do{f=base54(++b)}while(!is_identifier(f));i.mangled_name=f;return true}if(c.screw_ie8&&i instanceof AST_SymbolCatch){d.push(i.definition());return}});this.walk(a);d.forEach(function(e){e.mangle(c)})});AST_Toplevel.DEFMETHOD("compute_char_frequency",function(b){b=this._default_mangler_options(b);var a=new TreeWalker(function(c){if(c instanceof AST_Constant){base54.consider(c.print_to_string())}else{if(c instanceof AST_Return){base54.consider("return")}else{if(c instanceof AST_Throw){base54.consider("throw")}else{if(c instanceof AST_Continue){base54.consider("continue")}else{if(c instanceof AST_Break){base54.consider("break")}else{if(c instanceof AST_Debugger){base54.consider("debugger")}else{if(c instanceof AST_Directive){base54.consider(c.value)}else{if(c instanceof AST_While){base54.consider("while")}else{if(c instanceof AST_Do){base54.consider("do while")}else{if(c instanceof AST_If){base54.consider("if");if(c.alternative){base54.consider("else")}}else{if(c instanceof AST_Var){base54.consider("var")}else{if(c instanceof AST_Const){base54.consider("const")}else{if(c instanceof AST_Lambda){base54.consider("function")}else{if(c instanceof AST_For){base54.consider("for")}else{if(c instanceof AST_ForIn){base54.consider("for in")}else{if(c instanceof AST_Switch){base54.consider("switch")}else{if(c instanceof AST_Case){base54.consider("case")}else{if(c instanceof AST_Default){base54.consider("default")}else{if(c instanceof AST_With){base54.consider("with")}else{if(c instanceof AST_ObjectSetter){base54.consider("set"+c.key)}else{if(c instanceof AST_ObjectGetter){base54.consider("get"+c.key)}else{if(c instanceof AST_ObjectKeyVal){base54.consider(c.key)}else{if(c instanceof AST_New){base54.consider("new")}else{if(c instanceof AST_This){base54.consider("this")}else{if(c instanceof AST_Try){base54.consider("try")}else{if(c instanceof AST_Catch){base54.consider("catch")}else{if(c instanceof AST_Finally){base54.consider("finally")}else{if(c instanceof AST_Symbol&&c.unmangleable(b)){base54.consider(c.name)}else{if(c instanceof AST_Unary||c instanceof AST_Binary){base54.consider(c.operator)}else{if(c instanceof AST_Dot){base54.consider(c.property)}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});this.walk(a);base54.sort()});var base54=(function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_0123456789";var c,d;function b(){d=Object.create(null);c=a.split("").map(function(f){return f.charCodeAt(0)});c.forEach(function(f){d[f]=0})}e.consider=function(h){for(var f=h.length;--f>=0;){var g=h.charCodeAt(f);if(g in d){++d[g]}}};e.sort=function(){c=mergeSort(c,function(g,f){if(is_digit(g)&&!is_digit(f)){return 1}if(is_digit(f)&&!is_digit(g)){return -1}return d[f]-d[g]})};e.reset=b;b();e.get=function(){return c};e.freq=function(){return d};function e(g){var f="",h=54;do{f+=String.fromCharCode(c[g%h]);g=Math.floor(g/h);h=64}while(g>0);return f}return e})();AST_Toplevel.DEFMETHOD("scope_warnings",function(options){options=defaults(options,{undeclared:false,unreferenced:true,assign_to_global:true,func_arguments:true,nested_defuns:true,eval:true});var tw=new TreeWalker(function(node){if(options.undeclared&&node instanceof AST_SymbolRef&&node.undeclared()){AST_Node.warn("Undeclared symbol: {name} [{file}:{line},{col}]",{name:node.name,file:node.start.file,line:node.start.line,col:node.start.col})}if(options.assign_to_global){var sym=null;if(node instanceof AST_Assign&&node.left instanceof AST_SymbolRef){sym=node.left}else{if(node instanceof AST_ForIn&&node.init instanceof AST_SymbolRef){sym=node.init}}if(sym&&(sym.undeclared()||(sym.global()&&sym.scope!==sym.definition().scope))){AST_Node.warn("{msg}: {name} [{file}:{line},{col}]",{msg:sym.undeclared()?"Accidental global?":"Assignment to global",name:sym.name,file:sym.start.file,line:sym.start.line,col:sym.start.col})}}if(options.eval&&node instanceof AST_SymbolRef&&node.undeclared()&&node.name=="eval"){AST_Node.warn("Eval is used [{file}:{line},{col}]",node.start)}if(options.unreferenced&&(node instanceof AST_SymbolDeclaration||node instanceof AST_Label)&&node.unreferenced()){AST_Node.warn("{type} {name} is declared but not referenced [{file}:{line},{col}]",{type:node instanceof AST_Label?"Label":"Symbol",name:node.name,file:node.start.file,line:node.start.line,col:node.start.col})}if(options.func_arguments&&node instanceof AST_Lambda&&node.uses_arguments){AST_Node.warn("arguments used in function {name} [{file}:{line},{col}]",{name:node.name?node.name.name:"anonymous",file:node.start.file,line:node.start.line,col:node.start.col})}if(options.nested_defuns&&node instanceof AST_Defun&&!(tw.parent() instanceof AST_Scope)){AST_Node.warn('Function {name} declared in nested statement "{type}" [{file}:{line},{col}]',{name:node.name.name,type:tw.parent().TYPE,file:node.start.file,line:node.start.line,col:node.start.col})}});this.walk(tw)});"use strict";function OutputStream(e){e=defaults(e,{indent_start:0,indent_level:4,quote_keys:false,space_colon:true,ascii_only:false,unescape_regexps:false,inline_script:false,width:80,max_line_len:32000,beautify:false,source_map:null,bracketize:false,semicolons:true,comments:false,preserve_line:false,screw_ie8:false,preamble:null,},true);var a=0;var r=0;var o=1;var s=0;var E="";function p(I,H){return I.replace(/[\u0080-\uffff]/g,function(J){var K=J.charCodeAt(0).toString(16);if(K.length<=2&&!H){while(K.length<2){K="0"+K}return"\\x"+K}else{while(K.length<4){K="0"+K}return"\\u"+K}})}function j(J){var I=0,H=0;J=J.replace(/[\\\b\f\n\r\t\x22\x27\u2028\u2029\0]/g,function(K){switch(K){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case'"':++I;return'"';case"'":++H;return"'";case"\0":return"\\x00"}return K});if(e.ascii_only){J=p(J)}if(I>H){return"'"+J.replace(/\x27/g,"\\'")+"'"}else{return'"'+J.replace(/\x22/g,'\\"')+'"'}}function t(I){var H=j(I);if(e.inline_script){H=H.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1")}return H}function m(H){H=H.toString();if(e.ascii_only){H=p(H,true)}return H}function B(H){return repeat_string(" ",e.indent_start+a-H*e.indent_level)}var h=false;var x=false;var k=null;function u(){return k.charAt(k.length-1)}function l(){if(e.max_line_len&&r>e.max_line_len){d("\n")}}var g=makePredicate("( [ + * / - , .");function d(L){L=String(L);var J=L.charAt(0);if(x){if((!J||";}".indexOf(J)<0)&&!/[;]$/.test(k)){if(e.semicolons||g(J)){E+=";";r++;s++}else{E+="\n";s++;o++;r=0}if(!e.beautify){h=false}}x=false;l()}if(!e.beautify&&e.preserve_line&&f[f.length-1]){var I=f[f.length-1].start.line;while(o<I){E+="\n";s++;o++;r=0;h=false}}if(h){var K=u();if((is_identifier_char(K)&&(is_identifier_char(J)||J=="\\"))||(/^[\+\-\/]$/.test(J)&&J==K)){E+=" ";r++;s++}h=false}var H=L.split(/\r?\n/),M=H.length-1;o+=M;if(M==0){r+=H[M].length}else{r=H[M].length}s+=L.length;k=L;E+=L}var A=e.beautify?function(){d(" ")}:function(){h=true};var n=e.beautify?function(H){if(e.beautify){d(B(H?0.5:0))}}:noop;var w=e.beautify?function(J,H){if(J===true){J=F()}var K=a;a=J;var I=H();a=K;return I}:function(I,H){return H()};var q=e.beautify?function(){d("\n")}:noop;var i=e.beautify?function(){d(";")}:function(){x=true};function c(){x=false;d(";")}function F(){return a+e.indent_level}function z(H){var I;d("{");q();w(F(),function(){I=H()});n();d("}");return I}function v(H){d("(");var I=H();d(")");return I}function D(H){d("[");var I=H();d("]");return I}function G(){d(",");A()}function y(){d(":");if(e.space_colon){A()}}var b=e.source_map?function(J,H){try{if(J){e.source_map.add(J.file||"?",o,r,J.line,J.col,(!H&&J.type=="name")?J.value:H)}}catch(I){AST_Node.warn("Couldn't figure out mapping for {file}:{line},{col} → {cline},{ccol} [{name}]",{file:J.file,line:J.line,col:J.col,cline:o,ccol:r,name:H||""})}}:noop;function C(){return E}if(e.preamble){d(e.preamble.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"))}var f=[];return{get:C,toString:C,indent:n,indentation:function(){return a},current_width:function(){return r-a},should_break:function(){return e.width&&this.current_width()>=e.width},newline:q,print:d,space:A,comma:G,colon:y,last:function(){return k},semicolon:i,force_semicolon:c,to_ascii:p,print_name:function(H){d(m(H))},print_string:function(H){d(t(H))},next_indent:F,with_indent:w,with_block:z,with_parens:v,with_square:D,add_mapping:b,option:function(H){return e[H]},line:function(){return o},col:function(){return r},pos:function(){return s},push_node:function(H){f.push(H)},pop_node:function(){return f.pop()},stack:function(){return f},parent:function(H){return f[f.length-2-(H||0)]}}}(function(){function h(q,r){q.DEFMETHOD("_codegen",r)}AST_Node.DEFMETHOD("print",function(u,r){var q=this,s=q._codegen;function t(){q.add_comments(u);q.add_source_map(u);s(q,u)}u.push_node(q);if(r||q.needs_parens(u)){u.with_parens(t)}else{t()}u.pop_node()});AST_Node.DEFMETHOD("print_to_string",function(q){var r=OutputStream(q);this.print(r);return r.get()});AST_Node.DEFMETHOD("add_comments",function(r){var u=r.option("comments"),q=this;if(u){var t=q.start;if(t&&!t._comments_dumped){t._comments_dumped=true;var s=t.comments_before||[];if(q instanceof AST_Exit&&q.value){q.value.walk(new TreeWalker(function(v){if(v.start&&v.start.comments_before){s=s.concat(v.start.comments_before);v.start.comments_before=[]}if(v instanceof AST_Function||v instanceof AST_Array||v instanceof AST_Object){return true}}))}if(u.test){s=s.filter(function(v){return u.test(v.value)})}else{if(typeof u=="function"){s=s.filter(function(v){return u(q,v)})}}s.forEach(function(v){if(/comment[134]/.test(v.type)){r.print("//"+v.value+"\n");r.indent()}else{if(v.type=="comment2"){r.print("/*"+v.value+"*/");if(t.nlb){r.print("\n");r.indent()}else{r.space()}}}})}}});function m(q,r){q.DEFMETHOD("needs_parens",r)}m(AST_Node,function(){return false});m(AST_Function,function(q){return f(q)});m(AST_Object,function(q){return f(q)});m(AST_Unary,function(q){var r=q.parent();return r instanceof AST_PropAccess&&r.expression===this});m(AST_Seq,function(q){var r=q.parent();return r instanceof AST_Call||r instanceof AST_Unary||r instanceof AST_Binary||r instanceof AST_VarDef||r instanceof AST_PropAccess||r instanceof AST_Array||r instanceof AST_ObjectProperty||r instanceof AST_Conditional});m(AST_Binary,function(s){var v=s.parent();if(v instanceof AST_Call&&v.expression===this){return true}if(v instanceof AST_Unary){return true}if(v instanceof AST_PropAccess&&v.expression===this){return true}if(v instanceof AST_Binary){var r=v.operator,q=PRECEDENCE[r];var u=this.operator,t=PRECEDENCE[u];if(q>t||(q==t&&this===v.right)){return true}}});m(AST_PropAccess,function(q){var s=q.parent();if(s instanceof AST_New&&s.expression===this){try{this.walk(new TreeWalker(function(t){if(t instanceof AST_Call){throw s}}))}catch(r){if(r!==s){throw r}return true}}});m(AST_Call,function(q){var r=q.parent(),s;if(r instanceof AST_New&&r.expression===this){return true}return this.expression instanceof AST_Function&&r instanceof AST_PropAccess&&r.expression===this&&(s=q.parent(1)) instanceof AST_Assign&&s.left===r});m(AST_New,function(q){var r=q.parent();if(j(this,q)&&(r instanceof AST_PropAccess||r instanceof AST_Call&&r.expression===this)){return true}});m(AST_Number,function(q){var r=q.parent();if(this.getValue()<0&&r instanceof AST_PropAccess&&r.expression===this){return true}});m(AST_NaN,function(q){var r=q.parent();if(r instanceof AST_PropAccess&&r.expression===this){return true}});function c(q){var r=q.parent();if(r instanceof AST_Unary){return true}if(r instanceof AST_Binary&&!(r instanceof AST_Assign)){return true}if(r instanceof AST_Call&&r.expression===this){return true}if(r instanceof AST_Conditional&&r.condition===this){return true}if(r instanceof AST_PropAccess&&r.expression===this){return true}}m(AST_Assign,c);m(AST_Conditional,c);h(AST_Directive,function(r,q){q.print_string(r.value);q.semicolon()});h(AST_Debugger,function(r,q){q.print("debugger");q.semicolon()});function g(q,t,r){var s=q.length-1;q.forEach(function(v,u){if(!(v instanceof AST_EmptyStatement)){r.indent();v.print(r);if(!(u==s&&t)){r.newline();if(t){r.newline()}}}})}AST_StatementWithBody.DEFMETHOD("_do_print_body",function(q){l(this.body,q)});h(AST_Statement,function(r,q){r.body.print(q);q.semicolon()});h(AST_Toplevel,function(r,q){g(r.body,true,q);q.print("")});h(AST_LabeledStatement,function(r,q){r.label.print(q);q.colon();r.body.print(q)});h(AST_SimpleStatement,function(r,q){r.body.print(q);q.semicolon()});function k(q,r){if(q.length>0){r.with_block(function(){g(q,false,r)})}else{r.print("{}")}}h(AST_BlockStatement,function(r,q){k(r.body,q)});h(AST_EmptyStatement,function(r,q){q.semicolon()});h(AST_Do,function(r,q){q.print("do");q.space();r._do_print_body(q);q.space();q.print("while");q.space();q.with_parens(function(){r.condition.print(q)});q.semicolon()});h(AST_While,function(r,q){q.print("while");q.space();q.with_parens(function(){r.condition.print(q)});q.space();r._do_print_body(q)});h(AST_For,function(r,q){q.print("for");q.space();q.with_parens(function(){if(r.init&&!(r.init instanceof AST_EmptyStatement)){if(r.init instanceof AST_Definitions){r.init.print(q)}else{b(r.init,q,true)}q.print(";");q.space()}else{q.print(";")}if(r.condition){r.condition.print(q);q.print(";");q.space()}else{q.print(";")}if(r.step){r.step.print(q)}});q.space();r._do_print_body(q)});h(AST_ForIn,function(r,q){q.print("for");q.space();q.with_parens(function(){r.init.print(q);q.space();q.print("in");q.space();r.object.print(q)});q.space();r._do_print_body(q)});h(AST_With,function(r,q){q.print("with");q.space();q.with_parens(function(){r.expression.print(q)});q.space();r._do_print_body(q)});AST_Lambda.DEFMETHOD("_do_print",function(r,s){var q=this;if(!s){r.print("function")}if(q.name){r.space();q.name.print(r)}r.with_parens(function(){q.argnames.forEach(function(t,u){if(u){r.comma()}t.print(r)})});r.space();k(q.body,r)});h(AST_Lambda,function(r,q){r._do_print(q)});AST_Exit.DEFMETHOD("_do_print",function(q,r){q.print(r);if(this.value){q.space();this.value.print(q)}q.semicolon()});h(AST_Return,function(r,q){r._do_print(q,"return")});h(AST_Throw,function(r,q){r._do_print(q,"throw")});AST_LoopControl.DEFMETHOD("_do_print",function(q,r){q.print(r);if(this.label){q.space();this.label.print(q)}q.semicolon()});h(AST_Break,function(r,q){r._do_print(q,"break")});h(AST_Continue,function(r,q){r._do_print(q,"continue")});function p(s,r){if(r.option("bracketize")){n(s.body,r);return}if(!s.body){return r.force_semicolon()}if(s.body instanceof AST_Do&&!r.option("screw_ie8")){n(s.body,r);return}var q=s.body;while(true){if(q instanceof AST_If){if(!q.alternative){n(s.body,r);return}q=q.alternative}else{if(q instanceof AST_StatementWithBody){q=q.body}else{break}}}l(s.body,r)}h(AST_If,function(r,q){q.print("if");q.space();q.with_parens(function(){r.condition.print(q)});q.space();if(r.alternative){p(r,q);q.space();q.print("else");q.space();l(r.alternative,q)}else{r._do_print_body(q)}});h(AST_Switch,function(r,q){q.print("switch");q.space();q.with_parens(function(){r.expression.print(q)});q.space();if(r.body.length>0){q.with_block(function(){r.body.forEach(function(t,s){if(s){q.newline()}q.indent(true);t.print(q)})})}else{q.print("{}")}});AST_SwitchBranch.DEFMETHOD("_do_print_body",function(q){if(this.body.length>0){q.newline();this.body.forEach(function(r){q.indent();r.print(q);q.newline()})}});h(AST_Default,function(r,q){q.print("default:");r._do_print_body(q)});h(AST_Case,function(r,q){q.print("case");q.space();r.expression.print(q);q.print(":");r._do_print_body(q)});h(AST_Try,function(r,q){q.print("try");q.space();k(r.body,q);if(r.bcatch){q.space();r.bcatch.print(q)}if(r.bfinally){q.space();r.bfinally.print(q)}});h(AST_Catch,function(r,q){q.print("catch");q.space();q.with_parens(function(){r.argname.print(q)});q.space();k(r.body,q)});h(AST_Finally,function(r,q){q.print("finally");q.space();k(r.body,q)});AST_Definitions.DEFMETHOD("_do_print",function(q,t){q.print(t);q.space();this.definitions.forEach(function(w,v){if(v){q.comma()}w.print(q)});var u=q.parent();var s=u instanceof AST_For||u instanceof AST_ForIn;var r=s&&u.init===this;if(!r){q.semicolon()}});h(AST_Var,function(r,q){r._do_print(q,"var")});h(AST_Const,function(r,q){r._do_print(q,"const")});function b(s,q,t){if(!t){s.print(q)}else{try{s.walk(new TreeWalker(function(u){if(u instanceof AST_Binary&&u.operator=="in"){throw q}}));s.print(q)}catch(r){if(r!==q){throw r}s.print(q,true)}}}h(AST_VarDef,function(r,q){r.name.print(q);if(r.value){q.space();q.print("=");q.space();var t=q.parent(1);var s=t instanceof AST_For||t instanceof AST_ForIn;b(r.value,q,s)}});h(AST_Call,function(r,q){r.expression.print(q);if(r instanceof AST_New&&j(r,q)){return}q.with_parens(function(){r.args.forEach(function(t,s){if(s){q.comma()}t.print(q)})})});h(AST_New,function(r,q){q.print("new");q.space();AST_Call.prototype._codegen(r,q)});AST_Seq.DEFMETHOD("_do_print",function(q){this.car.print(q);if(this.cdr){q.comma();if(q.should_break()){q.newline();q.indent()}this.cdr.print(q)}});h(AST_Seq,function(r,q){r._do_print(q)});h(AST_Dot,function(r,q){var s=r.expression;s.print(q);if(s instanceof AST_Number&&s.getValue()>=0){if(!/[xa-f.]/i.test(q.last())){q.print(".")}}q.print(".");q.add_mapping(r.end);q.print_name(r.property)});h(AST_Sub,function(r,q){r.expression.print(q);q.print("[");r.property.print(q);q.print("]")});h(AST_UnaryPrefix,function(r,q){var s=r.operator;q.print(s);if(/^[a-z]/i.test(s)||(/[+-]$/.test(s)&&r.expression instanceof AST_UnaryPrefix&&/^[+-]/.test(r.expression.operator))){q.space()}r.expression.print(q)});h(AST_UnaryPostfix,function(r,q){r.expression.print(q);q.print(r.operator)});h(AST_Binary,function(r,q){r.left.print(q);q.space();q.print(r.operator);if(r.operator=="<"&&r.right instanceof AST_UnaryPrefix&&r.right.operator=="!"&&r.right.expression instanceof AST_UnaryPrefix&&r.right.expression.operator=="--"){q.print(" ")}else{q.space()}r.right.print(q)});h(AST_Conditional,function(r,q){r.condition.print(q);q.space();q.print("?");q.space();r.consequent.print(q);q.space();q.colon();r.alternative.print(q)});h(AST_Array,function(r,q){q.with_square(function(){var t=r.elements,s=t.length;if(s>0){q.space()}t.forEach(function(v,u){if(u){q.comma()}v.print(q);if(u===s-1&&v instanceof AST_Hole){q.comma()}});if(s>0){q.space()}})});h(AST_Object,function(r,q){if(r.properties.length>0){q.with_block(function(){r.properties.forEach(function(t,s){if(s){q.print(",");q.newline()}q.indent();t.print(q)});q.newline()})}else{q.print("{}")}});h(AST_ObjectKeyVal,function(r,q){var s=r.key;if(q.option("quote_keys")){q.print_string(s+"")}else{if((typeof s=="number"||!q.option("beautify")&&+s+""==s)&&parseFloat(s)>=0){q.print(o(s))}else{if(RESERVED_WORDS(s)?q.option("screw_ie8"):is_identifier_string(s)){q.print_name(s)}else{q.print_string(s)}}}q.colon();r.value.print(q)});h(AST_ObjectSetter,function(r,q){q.print("set");q.space();r.key.print(q);r.value._do_print(q,true)});h(AST_ObjectGetter,function(r,q){q.print("get");q.space();r.key.print(q);r.value._do_print(q,true)});h(AST_Symbol,function(r,q){var s=r.definition();q.print_name(s?s.mangled_name||s.name:r.name)});h(AST_Undefined,function(r,q){q.print("void 0")});h(AST_Hole,noop);h(AST_Infinity,function(r,q){q.print("1/0")});h(AST_NaN,function(r,q){q.print("0/0")});h(AST_This,function(r,q){q.print("this")});h(AST_Constant,function(r,q){q.print(r.getValue())});h(AST_String,function(r,q){q.print_string(r.getValue())});h(AST_Number,function(r,q){q.print(o(r.getValue()))});function e(q){return[92,47,46,43,42,63,40,41,91,93,123,125,36,94,58,124,33,10,13,0,65279,8232,8233,].indexOf(q)<0}h(AST_RegExp,function(r,q){var t=r.getValue().toString();if(q.option("ascii_only")){t=q.to_ascii(t)}else{if(q.option("unescape_regexps")){t=t.split("\\\\").map(function(u){return u.replace(/\\u[0-9a-fA-F]{4}|\\x[0-9a-fA-F]{2}/g,function(v){var w=parseInt(v.substr(2),16);return e(w)?String.fromCharCode(w):v})}).join("\\\\")}}q.print(t);var s=q.parent();if(s instanceof AST_Binary&&/^in/.test(s.operator)&&s.left===r){q.print(" ")}});function l(r,q){if(q.option("bracketize")){if(!r||r instanceof AST_EmptyStatement){q.print("{}")}else{if(r instanceof AST_BlockStatement){r.print(q)}else{q.with_block(function(){q.indent();r.print(q);q.newline()})}}}else{if(!r||r instanceof AST_EmptyStatement){q.force_semicolon()}else{r.print(q)}}}function f(r){var q=r.stack(),s=q.length,t=q[--s],u=q[--s];while(s>0){if(u instanceof AST_Statement&&u.body===t){return true}if((u instanceof AST_Seq&&u.car===t)||(u instanceof AST_Call&&u.expression===t&&!(u instanceof AST_New))||(u instanceof AST_Dot&&u.expression===t)||(u instanceof AST_Sub&&u.expression===t)||(u instanceof AST_Conditional&&u.condition===t)||(u instanceof AST_Binary&&u.left===t)||(u instanceof AST_UnaryPostfix&&u.expression===t)){t=u;u=q[--s]}else{return false}}}function j(r,q){return r.args.length==0&&!q.option("beautify")}function i(r){var t=r[0],q=t.length;for(var s=1;s<r.length;++s){if(r[s].length<q){t=r[s];q=t.length}}return t}function o(s){var t=s.toString(10),r=[t.replace(/^0\./,".").replace("e+","e")],q;if(Math.floor(s)===s){if(s>=0){r.push("0x"+s.toString(16).toLowerCase(),"0"+s.toString(8))}else{r.push("-0x"+(-s).toString(16).toLowerCase(),"-0"+(-s).toString(8))}if((q=/^(.*?)(0+)$/.exec(s))){r.push(q[1]+"e"+q[2].length)}}else{if((q=/^0?\.(0+)(.*)$/.exec(s))){r.push(q[2]+"e-"+(q[1].length+q[2].length),t.substr(t.indexOf(".")))}}return i(r)}function n(r,q){if(r instanceof AST_BlockStatement){r.print(q);return}q.with_block(function(){q.indent();r.print(q);q.newline()})}function a(q,r){q.DEFMETHOD("add_source_map",function(s){r(this,s)})}a(AST_Node,noop);function d(r,q){q.add_mapping(r.start)}a(AST_Directive,d);a(AST_Debugger,d);a(AST_Symbol,d);a(AST_Jump,d);a(AST_StatementWithBody,d);a(AST_LabeledStatement,noop);a(AST_Lambda,d);a(AST_Switch,d);a(AST_SwitchBranch,d);a(AST_BlockStatement,d);a(AST_Toplevel,noop);a(AST_New,d);a(AST_Try,d);a(AST_Catch,d);a(AST_Finally,d);a(AST_Definitions,d);a(AST_Constant,d);a(AST_ObjectProperty,function(r,q){q.add_mapping(r.start,r.key)})})();"use strict";function Compressor(a,b){if(!(this instanceof Compressor)){return new Compressor(a,b)}TreeTransformer.call(this,this.before,this.after);this.options=defaults(a,{sequences:!b,properties:!b,dead_code:!b,drop_debugger:!b,unsafe:false,unsafe_comps:false,conditionals:!b,comparisons:!b,evaluate:!b,booleans:!b,loops:!b,unused:!b,hoist_funs:!b,keep_fargs:false,hoist_vars:false,if_return:!b,join_vars:!b,cascade:!b,side_effects:!b,pure_getters:false,pure_funcs:null,negate_iife:!b,screw_ie8:false,drop_console:false,angular:false,warnings:true,global_defs:{}},true)}Compressor.prototype=new TreeTransformer;merge(Compressor.prototype,{option:function(a){return this.options[a]},warn:function(){if(this.options.warnings){AST_Node.warn.apply(AST_Node,arguments)}},before:function(c,a,b){if(c._squeezed){return c}var d=false;if(c instanceof AST_Scope){c=c.hoist_declarations(this);d=true}a(c,this);c=c.optimize(this);if(d&&c instanceof AST_Scope){c.drop_unused(this);a(c,this)}c._squeezed=true;return c}});(function(){function k(q,p){q.DEFMETHOD("optimize",function(t){var r=this;if(r._optimized){return r}var s=p(r,t);s._optimized=true;if(s===r){return s}return s.transform(t)})}k(AST_Node,function(p,q){return p});AST_Node.DEFMETHOD("equivalent_to",function(p){return this.print_to_string()==p.print_to_string()});function m(q,r,p){if(!p){p={}}if(r){if(!p.start){p.start=r.start}if(!p.end){p.end=r.end}}return new q(p)}function n(r,p,q){if(p instanceof AST_Node){return p.transform(r)}switch(typeof p){case"string":return m(AST_String,q,{value:p}).optimize(r);case"number":return m(isNaN(p)?AST_NaN:AST_Number,q,{value:p}).optimize(r);case"boolean":return m(p?AST_True:AST_False,q).optimize(r);case"undefined":return m(AST_Undefined,q).optimize(r);default:if(p===null){return m(AST_Null,q).optimize(r)}if(p instanceof RegExp){return m(AST_RegExp,q).optimize(r)}throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof p}))}}function g(p){if(p===null){return[]}if(p instanceof AST_BlockStatement){return p.body}if(p instanceof AST_EmptyStatement){return[]}if(p instanceof AST_Statement){return[p]}throw new Error("Can't convert thing to statement array")}function e(p){if(p===null){return true}if(p instanceof AST_EmptyStatement){return true}if(p instanceof AST_BlockStatement){return p.body.length==0}return false}function i(p){if(p instanceof AST_Switch){return p}if(p instanceof AST_For||p instanceof AST_ForIn||p instanceof AST_DWLoop){return(p.body instanceof AST_BlockStatement?p.body:p)}return p}function h(s,r){var w;do{w=false;if(r.option("angular")){s=y(s)}s=v(s);if(r.option("dead_code")){s=t(s,r)}if(r.option("if_return")){s=q(s,r)}if(r.option("sequences")){s=u(s,r)}if(r.option("join_vars")){s=z(s,r)}}while(w);if(r.option("negate_iife")){x(s,r)}return s;function y(A){function B(D,C){return m(AST_SimpleStatement,D,{body:m(AST_Assign,D,{operator:"=",left:m(AST_Dot,C,{expression:m(AST_SymbolRef,C,C),property:"$inject"}),right:m(AST_Array,D,{elements:D.argnames.map(function(E){return m(AST_String,E,{value:E.name})})})})})}return A.reduce(function(C,E){C.push(E);var D=E.start;var G=D.comments_before;if(G&&G.length>0){var F=G.pop();if(/@ngInject/.test(F.value)){if(E instanceof AST_Defun){C.push(B(E,E.name))}else{if(E instanceof AST_Definitions){E.definitions.forEach(function(H){if(H.value&&H.value instanceof AST_Lambda){C.push(B(H.value,H.name))}})}else{r.warn("Unknown statement marked with @ngInject [{file}:{line},{col}]",D)}}}}return C},[])}function v(B){var A=[];return B.reduce(function(C,D){if(D instanceof AST_BlockStatement){w=true;C.push.apply(C,v(D.body))}else{if(D instanceof AST_EmptyStatement){w=true}else{if(D instanceof AST_Directive){if(A.indexOf(D.value)<0){C.push(D);A.push(D.value)}else{w=true}}else{C.push(D)}}}return C},[])}function q(E,A){var I=A.self();var H=I instanceof AST_Lambda;var F=[];loop:for(var C=E.length;--C>=0;){var B=E[C];switch(true){case (H&&B instanceof AST_Return&&!B.value&&F.length==0):w=true;continue loop;case B instanceof AST_If:if(B.body instanceof AST_Return){if(((H&&F.length==0)||(F[0] instanceof AST_Return&&!F[0].value))&&!B.body.value&&!B.alternative){w=true;var G=m(AST_SimpleStatement,B.condition,{body:B.condition});F.unshift(G);continue loop}if(F[0] instanceof AST_Return&&B.body.value&&F[0].value&&!B.alternative){w=true;B=B.clone();B.alternative=F[0];F[0]=B.transform(A);continue loop}if((F.length==0||F[0] instanceof AST_Return)&&B.body.value&&!B.alternative&&H){w=true;B=B.clone();B.alternative=F[0]||m(AST_Return,B,{value:m(AST_Undefined,B)});F[0]=B.transform(A);continue loop}if(!B.body.value&&H){w=true;B=B.clone();B.condition=B.condition.negate(A);B.body=m(AST_BlockStatement,B,{body:g(B.alternative).concat(F)});B.alternative=null;F=[B.transform(A)];continue loop}if(F.length==1&&H&&F[0] instanceof AST_SimpleStatement&&(!B.alternative||B.alternative instanceof AST_SimpleStatement)){w=true;F.push(m(AST_Return,F[0],{value:m(AST_Undefined,F[0])}).transform(A));F=g(B.alternative).concat(F);F.unshift(B);continue loop}}var K=l(B.body);var J=K instanceof AST_LoopControl?A.loopcontrol_target(K.label):null;if(K&&((K instanceof AST_Return&&!K.value&&H)||(K instanceof AST_Continue&&I===i(J))||(K instanceof AST_Break&&J instanceof AST_BlockStatement&&I===J))){if(K.label){remove(K.label.thedef.references,K)}w=true;var D=g(B.body).slice(0,-1);B=B.clone();B.condition=B.condition.negate(A);B.body=m(AST_BlockStatement,B,{body:g(B.alternative).concat(F)});B.alternative=m(AST_BlockStatement,B,{body:D});F=[B.transform(A)];continue loop}var K=l(B.alternative);var J=K instanceof AST_LoopControl?A.loopcontrol_target(K.label):null;if(K&&((K instanceof AST_Return&&!K.value&&H)||(K instanceof AST_Continue&&I===i(J))||(K instanceof AST_Break&&J instanceof AST_BlockStatement&&I===J))){if(K.label){remove(K.label.thedef.references,K)}w=true;B=B.clone();B.body=m(AST_BlockStatement,B.body,{body:g(B.body).concat(F)});B.alternative=m(AST_BlockStatement,B.alternative,{body:g(B.alternative).slice(0,-1)});F=[B.transform(A)];continue loop}F.unshift(B);break;default:F.unshift(B);break}}return F}function t(C,E){var A=false;var D=C.length;var B=E.self();C=C.reduce(function(G,H){if(A){o(E,H,G)}else{if(H instanceof AST_LoopControl){var F=E.loopcontrol_target(H.label);if((H instanceof AST_Break&&F instanceof AST_BlockStatement&&i(F)===B)||(H instanceof AST_Continue&&i(F)===B)){if(H.label){remove(H.label.thedef.references,H)}}else{G.push(H)}}else{G.push(H)}if(l(H)){A=true}}return G},[]);w=C.length!=D;return C}function u(B,E){if(B.length<2){return B}var A=[],C=[];function D(){A=AST_Seq.from_array(A);if(A){C.push(m(AST_SimpleStatement,A,{body:A}))}A=[]}B.forEach(function(F){if(F instanceof AST_SimpleStatement){A.push(F.body)}else{D(),C.push(F)}});D();C=p(C,E);w=C.length!=B.length;return C}function p(A,E){function C(F){B.pop();var G=D.body;if(G instanceof AST_Seq){G.add(F)}else{G=AST_Seq.cons(G,F)}return G.transform(E)}var B=[],D=null;A.forEach(function(H){if(D){if(H instanceof AST_For){var F={};try{D.body.walk(new TreeWalker(function(I){if(I instanceof AST_Binary&&I.operator=="in"){throw F}}));if(H.init&&!(H.init instanceof AST_Definitions)){H.init=C(H.init)}else{if(!H.init){H.init=D.body;B.pop()}}}catch(G){if(G!==F){throw G}}}else{if(H instanceof AST_If){H.condition=C(H.condition)}else{if(H instanceof AST_With){H.expression=C(H.expression)}else{if(H instanceof AST_Exit&&H.value){H.value=C(H.value)}else{if(H instanceof AST_Exit){H.value=C(m(AST_Undefined,H))}else{if(H instanceof AST_Switch){H.expression=C(H.expression)}}}}}}}B.push(H);D=H instanceof AST_SimpleStatement?H:null});return B}function z(A,C){var B=null;return A.reduce(function(D,E){if(E instanceof AST_Definitions&&B&&B.TYPE==E.TYPE){B.definitions=B.definitions.concat(E.definitions);w=true}else{if(E instanceof AST_For&&B instanceof AST_Definitions&&(!E.init||E.init.TYPE==B.TYPE)){w=true;D.pop();if(E.init){E.init.definitions=B.definitions.concat(E.init.definitions)}else{E.init=B}D.push(E);B=E}else{B=E;D.push(E)}}return D},[])}function x(A,B){A.forEach(function(D){if(D instanceof AST_SimpleStatement){D.body=(function C(E){return E.transform(new TreeTransformer(function(G){if(G instanceof AST_Call&&G.expression instanceof AST_Function){return m(AST_UnaryPrefix,G,{operator:"!",expression:G})}else{if(G instanceof AST_Call){G.expression=C(G.expression)}else{if(G instanceof AST_Seq){G.car=C(G.car)}else{if(G instanceof AST_Conditional){var H=C(G.condition);if(H!==G.condition){G.condition=H;var F=G.consequent;G.consequent=G.alternative;G.alternative=F}}}}}return G}))})(D.body)}})}}function o(r,p,q){r.warn("Dropping unreachable code [{file}:{line},{col}]",p.start);p.walk(new TreeWalker(function(s){if(s instanceof AST_Definitions){r.warn("Declarations in unreachable code! [{file}:{line},{col}]",s.start);s.remove_initializers();q.push(s);return true}if(s instanceof AST_Defun){q.push(s);return true}if(s instanceof AST_Scope){return true}}))}(function(q){var p=["!","delete"];var r=["in","instanceof","==","!=","===","!==","<","<=",">=",">"];q(AST_Node,function(){return false});q(AST_UnaryPrefix,function(){return member(this.operator,p)});q(AST_Binary,function(){return member(this.operator,r)||((this.operator=="&&"||this.operator=="||")&&this.left.is_boolean()&&this.right.is_boolean())});q(AST_Conditional,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()});q(AST_Assign,function(){return this.operator=="="&&this.right.is_boolean()});q(AST_Seq,function(){return this.cdr.is_boolean()});q(AST_True,function(){return true});q(AST_False,function(){return true})})(function(q,p){q.DEFMETHOD("is_boolean",p)});(function(p){p(AST_Node,function(){return false});p(AST_String,function(){return true});p(AST_UnaryPrefix,function(){return this.operator=="typeof"});p(AST_Binary,function(q){return this.operator=="+"&&(this.left.is_string(q)||this.right.is_string(q))});p(AST_Assign,function(q){return(this.operator=="="||this.operator=="+=")&&this.right.is_string(q)});p(AST_Seq,function(q){return this.cdr.is_string(q)});p(AST_Conditional,function(q){return this.consequent.is_string(q)&&this.alternative.is_string(q)});p(AST_Call,function(q){return q.option("unsafe")&&this.expression instanceof AST_SymbolRef&&this.expression.name=="String"&&this.expression.undeclared()})})(function(q,p){q.DEFMETHOD("is_string",p)});function f(q,p){return q.print_to_string().length>p.print_to_string().length?p:q}(function(q){AST_Node.DEFMETHOD("evaluate",function(t){if(!t.option("evaluate")){return[this]}try{var s=this._eval(t);return[f(n(t,s,this),this),s]}catch(r){if(r!==q){throw r}return[this]}});q(AST_Statement,function(){throw new Error(string_template("Cannot evaluate a statement [{file}:{line},{col}]",this.start))});q(AST_Function,function(){throw q});function p(r,s){if(!s){throw new Error("Compressor must be passed")}return r._eval(s)}q(AST_Node,function(){throw q});q(AST_Constant,function(){return this.getValue()});q(AST_UnaryPrefix,function(s){var r=this.expression;switch(this.operator){case"!":return !p(r,s);case"typeof":if(r instanceof AST_Function){return typeof function(){}}r=p(r,s);if(r instanceof RegExp){throw q}return typeof r;case"void":return void p(r,s);case"~":return ~p(r,s);case"-":r=p(r,s);if(r===0){throw q}return -r;case"+":return +p(r,s)}throw q});q(AST_Binary,function(t){var s=this.left,r=this.right;switch(this.operator){case"&&":return p(s,t)&&p(r,t);case"||":return p(s,t)||p(r,t);case"|":return p(s,t)|p(r,t);case"&":return p(s,t)&p(r,t);case"^":return p(s,t)^p(r,t);case"+":return p(s,t)+p(r,t);case"*":return p(s,t)*p(r,t);case"/":return p(s,t)/p(r,t);case"%":return p(s,t)%p(r,t);case"-":return p(s,t)-p(r,t);case"<<":return p(s,t)<<p(r,t);case">>":return p(s,t)>>p(r,t);case">>>":return p(s,t)>>>p(r,t);case"==":return p(s,t)==p(r,t);case"===":return p(s,t)===p(r,t);case"!=":return p(s,t)!=p(r,t);case"!==":return p(s,t)!==p(r,t);case"<":return p(s,t)<p(r,t);case"<=":return p(s,t)<=p(r,t);case">":return p(s,t)>p(r,t);case">=":return p(s,t)>=p(r,t);case"in":return p(s,t) in p(r,t);case"instanceof":return p(s,t) instanceof p(r,t)}throw q});q(AST_Conditional,function(r){return p(this.condition,r)?p(this.consequent,r):p(this.alternative,r)});q(AST_SymbolRef,function(s){var r=this.definition();if(r&&r.constant&&r.init){return p(r.init,s)}throw q});q(AST_Dot,function(s){if(s.option("unsafe")&&this.property=="length"){var r=p(this.expression,s);if(typeof r=="string"){return r.length}}throw q})})(function(q,p){q.DEFMETHOD("_eval",p)});(function(q){function p(r){return m(AST_UnaryPrefix,r,{operator:"!",expression:r})}q(AST_Node,function(){return p(this)});q(AST_Statement,function(){throw new Error("Cannot negate a statement")});q(AST_Function,function(){return p(this)});q(AST_UnaryPrefix,function(){if(this.operator=="!"){return this.expression}return p(this)});q(AST_Seq,function(s){var r=this.clone();r.cdr=r.cdr.negate(s);return r});q(AST_Conditional,function(s){var r=this.clone();r.consequent=r.consequent.negate(s);r.alternative=r.alternative.negate(s);return f(p(this),r)});q(AST_Binary,function(t){var r=this.clone(),s=this.operator;if(t.option("unsafe_comps")){switch(s){case"<=":r.operator=">";return r;case"<":r.operator=">=";return r;case">=":r.operator="<";return r;case">":r.operator="<=";return r}}switch(s){case"==":r.operator="!=";return r;case"!=":r.operator="==";return r;case"===":r.operator="!==";return r;case"!==":r.operator="===";return r;case"&&":r.operator="||";r.left=r.left.negate(t);r.right=r.right.negate(t);return f(p(this),r);case"||":r.operator="&&";r.left=r.left.negate(t);r.right=r.right.negate(t);return f(p(this),r)}return p(this)})})(function(q,p){q.DEFMETHOD("negate",function(r){return p.call(this,r)})});(function(p){p(AST_Node,function(q){return true});p(AST_EmptyStatement,function(q){return false});p(AST_Constant,function(q){return false});p(AST_This,function(q){return false});p(AST_Call,function(r){var q=r.option("pure_funcs");if(!q){return true}return q.indexOf(this.expression.print_to_string())<0});p(AST_Block,function(r){for(var q=this.body.length;--q>=0;){if(this.body[q].has_side_effects(r)){return true}}return false});p(AST_SimpleStatement,function(q){return this.body.has_side_effects(q)});p(AST_Defun,function(q){return true});p(AST_Function,function(q){return false});p(AST_Binary,function(q){return this.left.has_side_effects(q)||this.right.has_side_effects(q)});p(AST_Assign,function(q){return true});p(AST_Conditional,function(q){return this.condition.has_side_effects(q)||this.consequent.has_side_effects(q)||this.alternative.has_side_effects(q)});p(AST_Unary,function(q){return this.operator=="delete"||this.operator=="++"||this.operator=="--"||this.expression.has_side_effects(q)});p(AST_SymbolRef,function(q){return false});p(AST_Object,function(r){for(var q=this.properties.length;--q>=0;){if(this.properties[q].has_side_effects(r)){return true}}return false});p(AST_ObjectProperty,function(q){return this.value.has_side_effects(q)});p(AST_Array,function(r){for(var q=this.elements.length;--q>=0;){if(this.elements[q].has_side_effects(r)){return true}}return false});p(AST_Dot,function(q){if(!q.option("pure_getters")){return true}return this.expression.has_side_effects(q)});p(AST_Sub,function(q){if(!q.option("pure_getters")){return true}return this.expression.has_side_effects(q)||this.property.has_side_effects(q)});p(AST_PropAccess,function(q){return !q.option("pure_getters")});p(AST_Seq,function(q){return this.car.has_side_effects(q)||this.cdr.has_side_effects(q)})})(function(q,p){q.DEFMETHOD("has_side_effects",p)});function l(p){return p&&p.aborts()}(function(p){p(AST_Statement,function(){return null});p(AST_Jump,function(){return this});function q(){var r=this.body.length;return r>0&&l(this.body[r-1])}p(AST_BlockStatement,q);p(AST_SwitchBranch,q);p(AST_If,function(){return this.alternative&&l(this.body)&&l(this.alternative)})})(function(q,p){q.DEFMETHOD("aborts",p)});k(AST_Directive,function(p,q){if(p.scope.has_directive(p.value)!==p.scope){return m(AST_EmptyStatement,p)}return p});k(AST_Debugger,function(p,q){if(q.option("drop_debugger")){return m(AST_EmptyStatement,p)}return p});k(AST_LabeledStatement,function(p,q){if(p.body instanceof AST_Break&&q.loopcontrol_target(p.body.label)===p.body){return m(AST_EmptyStatement,p)}return p.label.references.length==0?p.body:p});k(AST_Block,function(p,q){p.body=h(p.body,q);return p});k(AST_BlockStatement,function(p,q){p.body=h(p.body,q);switch(p.body.length){case 1:return p.body[0];case 0:return m(AST_EmptyStatement,p)}return p});AST_Scope.DEFMETHOD("drop_unused",function(p){var x=this;if(p.option("unused")&&!(x instanceof AST_Toplevel)&&!x.uses_eval){var v=[];var r=new Dictionary();var w=this;var s=new TreeWalker(function(A,z){if(A!==x){if(A instanceof AST_Defun){r.add(A.name.name,A);return true}if(A instanceof AST_Definitions&&w===x){A.definitions.forEach(function(B){if(B.value){r.add(B.name.name,B.value);if(B.value.has_side_effects(p)){B.value.walk(s)}}});return true}if(A instanceof AST_SymbolRef){push_uniq(v,A.definition());return true}if(A instanceof AST_Scope){var y=w;w=A;z();w=y;return true}}});x.walk(s);for(var q=0;q<v.length;++q){v[q].orig.forEach(function(y){var z=r.get(y.name);if(z){z.forEach(function(B){var A=new TreeWalker(function(C){if(C instanceof AST_SymbolRef){push_uniq(v,C.definition())}});B.walk(A)})}})}var t=new TreeTransformer(function u(B,E,H){if(B instanceof AST_Lambda&&!(B instanceof AST_Accessor)){if(!p.option("keep_fargs")){for(var G=B.argnames,C=G.length;--C>=0;){var A=G[C];if(A.unreferenced()){G.pop();p.warn("Dropping unused function argument {name} [{file}:{line},{col}]",{name:A.name,file:A.start.file,line:A.start.line,col:A.start.col})}else{break}}}}if(B instanceof AST_Defun&&B!==x){if(!member(B.name.definition(),v)){p.warn("Dropping unused function {name} [{file}:{line},{col}]",{name:B.name.name,file:B.name.start.file,line:B.name.start.line,col:B.name.start.col});return m(AST_EmptyStatement,B)}return B}if(B instanceof AST_Definitions&&!(t.parent() instanceof AST_ForIn)){var y=B.definitions.filter(function(J){if(member(J.name.definition(),v)){return true}var I={name:J.name.name,file:J.name.start.file,line:J.name.start.line,col:J.name.start.col};if(J.value&&J.value.has_side_effects(p)){J._unused_side_effects=true;p.warn("Side effects in initialization of unused variable {name} [{file}:{line},{col}]",I);return true}p.warn("Dropping unused variable {name} [{file}:{line},{col}]",I);return false});y=mergeSort(y,function(J,I){if(!J.value&&I.value){return -1}if(!I.value&&J.value){return 1}return 0});var z=[];for(var C=0;C<y.length;){var F=y[C];if(F._unused_side_effects){z.push(F.value);y.splice(C,1)}else{if(z.length>0){z.push(F.value);F.value=AST_Seq.from_array(z);z=[]}++C}}if(z.length>0){z=m(AST_BlockStatement,B,{body:[m(AST_SimpleStatement,B,{body:AST_Seq.from_array(z)})]})}else{z=null}if(y.length==0&&!z){return m(AST_EmptyStatement,B)}if(y.length==0){return z}B.definitions=y;if(z){z.body.unshift(B);B=z}return B}if(B instanceof AST_For){E(B,this);if(B.init instanceof AST_BlockStatement){var D=B.init.body.slice(0,-1);B.init=B.init.body.slice(-1)[0].body;D.push(B);return H?MAP.splice(D):m(AST_BlockStatement,B,{body:D})}}if(B instanceof AST_Scope&&B!==x){return B}});x.transform(t)}});AST_Scope.DEFMETHOD("hoist_declarations",function(x){var D=x.option("hoist_funs");var t=x.option("hoist_vars");var A=this;if(D||t){var s=[];var E=[];var B=new Dictionary(),z=0,u=0;A.walk(new TreeWalker(function(H){if(H instanceof AST_Scope&&H!==A){return true}if(H instanceof AST_Var){++u;return true}}));t=t&&u>1;var p=new TreeTransformer(function w(I){if(I!==A){if(I instanceof AST_Directive){s.push(I);return m(AST_EmptyStatement,I)}if(I instanceof AST_Defun&&D){E.push(I);return m(AST_EmptyStatement,I)}if(I instanceof AST_Var&&t){I.definitions.forEach(function(K){B.set(K.name.name,K);++z});var H=I.to_assignments();var J=p.parent();if(J instanceof AST_ForIn&&J.init===I){if(H==null){return I.definitions[0].name}return H}if(J instanceof AST_For&&J.init===I){return H}if(!H){return m(AST_EmptyStatement,I)}return m(AST_SimpleStatement,I,{body:H})}if(I instanceof AST_Scope){return I}}});A=A.transform(p);if(z>0){var q=[];B.each(function(I,H){if(A instanceof AST_Lambda&&find_if(function(J){return J.name==I.name.name},A.argnames)){B.del(H)}else{I=I.clone();I.value=null;q.push(I);B.set(H,I)}});if(q.length>0){for(var F=0;F<A.body.length;){if(A.body[F] instanceof AST_SimpleStatement){var r=A.body[F].body,v,C;if(r instanceof AST_Assign&&r.operator=="="&&(v=r.left) instanceof AST_Symbol&&B.has(v.name)){var y=B.get(v.name);if(y.value){break}y.value=r.right;remove(q,y);q.push(y);A.body.splice(F,1);continue}if(r instanceof AST_Seq&&(C=r.car) instanceof AST_Assign&&C.operator=="="&&(v=C.left) instanceof AST_Symbol&&B.has(v.name)){var y=B.get(v.name);if(y.value){break}y.value=C.right;remove(q,y);q.push(y);A.body[F].body=r.cdr;continue}}if(A.body[F] instanceof AST_EmptyStatement){A.body.splice(F,1);continue}if(A.body[F] instanceof AST_BlockStatement){var G=[F,1].concat(A.body[F].body);A.body.splice.apply(A.body,G);continue}break}q=m(AST_Var,A,{definitions:q});E.push(q)}}A.body=s.concat(E,A.body)}return A});k(AST_SimpleStatement,function(p,q){if(q.option("side_effects")){if(!p.body.has_side_effects(q)){q.warn("Dropping side-effect-free statement [{file}:{line},{col}]",p.start);return m(AST_EmptyStatement,p)}}return p});k(AST_DWLoop,function(q,s){var r=q.condition.evaluate(s);q.condition=r[0];if(!s.option("loops")){return q}if(r.length>1){if(r[1]){return m(AST_For,q,{body:q.body})}else{if(q instanceof AST_While){if(s.option("dead_code")){var p=[];o(s,q.body,p);return m(AST_BlockStatement,q,{body:p})}}}}return q});function b(p,s){function q(t){t=g(t);if(p.body instanceof AST_BlockStatement){p.body=p.body.clone();p.body.body=t.concat(p.body.body.slice(1));p.body=p.body.transform(s)}else{p.body=m(AST_BlockStatement,p.body,{body:t}).transform(s)}b(p,s)}var r=p.body instanceof AST_BlockStatement?p.body.body[0]:p.body;if(r instanceof AST_If){if(r.body instanceof AST_Break&&s.loopcontrol_target(r.body.label)===p){if(p.condition){p.condition=m(AST_Binary,p.condition,{left:p.condition,operator:"&&",right:r.condition.negate(s),})}else{p.condition=r.condition.negate(s)}q(r.alternative)}else{if(r.alternative instanceof AST_Break&&s.loopcontrol_target(r.alternative.label)===p){if(p.condition){p.condition=m(AST_Binary,p.condition,{left:p.condition,operator:"&&",right:r.condition,})}else{p.condition=r.condition}q(r.body)}}}}k(AST_While,function(p,q){if(!q.option("loops")){return p}p=AST_DWLoop.prototype.optimize.call(p,q);if(p instanceof AST_While){b(p,q);p=m(AST_For,p,p).transform(q)}return p});k(AST_For,function(q,s){var r=q.condition;if(r){r=r.evaluate(s);q.condition=r[0]}if(!s.option("loops")){return q}if(r){if(r.length>1&&!r[1]){if(s.option("dead_code")){var p=[];if(q.init instanceof AST_Statement){p.push(q.init)}else{if(q.init){p.push(m(AST_SimpleStatement,q.init,{body:q.init}))}}o(s,q.body,p);return m(AST_BlockStatement,q,{body:p})}}}b(q,s);return q});k(AST_If,function(x,r){if(!r.option("conditionals")){return x}var v=x.condition.evaluate(r);x.condition=v[0];if(v.length>1){if(v[1]){r.warn("Condition always true [{file}:{line},{col}]",x.condition.start);if(r.option("dead_code")){var w=[];if(x.alternative){o(r,x.alternative,w)}w.push(x.body);return m(AST_BlockStatement,x,{body:w}).transform(r)}}else{r.warn("Condition always false [{file}:{line},{col}]",x.condition.start);if(r.option("dead_code")){var w=[];o(r,x.body,w);if(x.alternative){w.push(x.alternative)}return m(AST_BlockStatement,x,{body:w}).transform(r)}}}if(e(x.alternative)){x.alternative=null}var p=x.condition.negate(r);var q=f(x.condition,p)===p;if(x.alternative&&q){q=false;x.condition=p;var s=x.body;x.body=x.alternative||m(AST_EmptyStatement);x.alternative=s}if(e(x.body)&&e(x.alternative)){return m(AST_SimpleStatement,x.condition,{body:x.condition}).transform(r)}if(x.body instanceof AST_SimpleStatement&&x.alternative instanceof AST_SimpleStatement){return m(AST_SimpleStatement,x,{body:m(AST_Conditional,x,{condition:x.condition,consequent:x.body.body,alternative:x.alternative.body})}).transform(r)}if(e(x.alternative)&&x.body instanceof AST_SimpleStatement){if(q){return m(AST_SimpleStatement,x,{body:m(AST_Binary,x,{operator:"||",left:p,right:x.body.body})}).transform(r)}return m(AST_SimpleStatement,x,{body:m(AST_Binary,x,{operator:"&&",left:x.condition,right:x.body.body})}).transform(r)}if(x.body instanceof AST_EmptyStatement&&x.alternative&&x.alternative instanceof AST_SimpleStatement){return m(AST_SimpleStatement,x,{body:m(AST_Binary,x,{operator:"||",left:x.condition,right:x.alternative.body})}).transform(r)}if(x.body instanceof AST_Exit&&x.alternative instanceof AST_Exit&&x.body.TYPE==x.alternative.TYPE){return m(x.body.CTOR,x,{value:m(AST_Conditional,x,{condition:x.condition,consequent:x.body.value||m(AST_Undefined,x.body).optimize(r),alternative:x.alternative.value||m(AST_Undefined,x.alternative).optimize(r)})}).transform(r)}if(x.body instanceof AST_If&&!x.body.alternative&&!x.alternative){x.condition=m(AST_Binary,x.condition,{operator:"&&",left:x.condition,right:x.body.condition}).transform(r);x.body=x.body.body}if(l(x.body)){if(x.alternative){var t=x.alternative;x.alternative=null;return m(AST_BlockStatement,x,{body:[x,t]}).transform(r)}}if(l(x.alternative)){var u=x.body;x.body=x.alternative;x.condition=q?p:x.condition.negate(r);x.alternative=null;return m(AST_BlockStatement,x,{body:[x,u]}).transform(r)}return x});k(AST_Switch,function(B,s){if(B.body.length==0&&s.option("conditionals")){return m(AST_SimpleStatement,B,{body:B.expression}).transform(s)}for(;;){var x=B.body[B.body.length-1];if(x){var t=x.body[x.body.length-1];if(t instanceof AST_Break&&i(s.loopcontrol_target(t.label))===B){x.body.pop()}if(x instanceof AST_Default&&x.body.length==0){B.body.pop();continue}}break}var r=B.expression.evaluate(s);out:if(r.length==2){try{B.expression=r[0];if(!s.option("dead_code")){break out}var z=r[1];var A=false;var q=false;var w=false;var p=false;var y=false;var u=new TreeTransformer(function(F,C,E){if(F instanceof AST_Lambda||F instanceof AST_SimpleStatement){return F}else{if(F instanceof AST_Switch&&F===B){F=F.clone();C(F,this);return y?F:m(AST_BlockStatement,F,{body:F.body.reduce(function(H,I){return H.concat(I.body)},[])}).transform(s)}else{if(F instanceof AST_If||F instanceof AST_Try){var D=A;A=!q;C(F,this);A=D;return F}else{if(F instanceof AST_StatementWithBody||F instanceof AST_Switch){var D=q;q=true;C(F,this);q=D;return F}else{if(F instanceof AST_Break&&this.loopcontrol_target(F.label)===B){if(A){y=true;return F}if(q){return F}p=true;return E?MAP.skip:m(AST_EmptyStatement,F)}else{if(F instanceof AST_SwitchBranch&&this.parent()===B){if(p){return MAP.skip}if(F instanceof AST_Case){var G=F.expression.evaluate(s);if(G.length<2){throw B}if(G[1]===z||w){w=true;if(l(F)){p=true}C(F,this);return F}return MAP.skip}C(F,this);return F}}}}}}});u.stack=s.stack.slice();B=B.transform(u)}catch(v){if(v!==B){throw v}}}return B});k(AST_Case,function(p,q){p.body=h(p.body,q);return p});k(AST_Try,function(p,q){p.body=h(p.body,q);return p});AST_Definitions.DEFMETHOD("remove_initializers",function(){this.definitions.forEach(function(p){p.value=null})});AST_Definitions.DEFMETHOD("to_assignments",function(){var p=this.definitions.reduce(function(q,s){if(s.value){var r=m(AST_SymbolRef,s.name,s.name);q.push(m(AST_Assign,s,{operator:"=",left:r,right:s.value}))}return q},[]);if(p.length==0){return null}return AST_Seq.from_array(p)});k(AST_Definitions,function(p,q){if(p.definitions.length==0){return m(AST_EmptyStatement,p)}return p});k(AST_Function,function(p,q){p=AST_Lambda.prototype.optimize.call(p,q);if(q.option("unused")){if(p.name&&p.name.unreferenced()){p.name=null}}return p});k(AST_Call,function(B,u){if(u.option("unsafe")){var t=B.expression;if(t instanceof AST_SymbolRef&&t.undeclared()){switch(t.name){case"Array":if(B.args.length!=1){return m(AST_Array,B,{elements:B.args}).transform(u)}break;case"Object":if(B.args.length==0){return m(AST_Object,B,{properties:[]})}break;case"String":if(B.args.length==0){return m(AST_String,B,{value:""})}if(B.args.length<=1){return m(AST_Binary,B,{left:B.args[0],operator:"+",right:m(AST_String,B,{value:""})}).transform(u)}break;case"Number":if(B.args.length==0){return m(AST_Number,B,{value:0})}if(B.args.length==1){return m(AST_UnaryPrefix,B,{expression:B.args[0],operator:"+"}).transform(u)}case"Boolean":if(B.args.length==0){return m(AST_False,B)}if(B.args.length==1){return m(AST_UnaryPrefix,B,{expression:m(AST_UnaryPrefix,null,{expression:B.args[0],operator:"!"}),operator:"!"}).transform(u)}break;case"Function":if(all(B.args,function(C){return C instanceof AST_String})){try{var r="(function("+B.args.slice(0,-1).map(function(C){return C.value}).join(",")+"){"+B.args[B.args.length-1].value+"})()";var q=parse(r);q.figure_out_scope({screw_ie8:u.option("screw_ie8")});var x=new Compressor(u.options);q=q.transform(x);q.figure_out_scope({screw_ie8:u.option("screw_ie8")});q.mangle_names();var A;try{q.walk(new TreeWalker(function(C){if(C instanceof AST_Lambda){A=C;throw q}}))}catch(z){if(z!==q){throw z}}var y=A.argnames.map(function(C,D){return m(AST_String,B.args[D],{value:C.print_to_string()})});var r=OutputStream();AST_BlockStatement.prototype._codegen.call(A,A,r);r=r.toString().replace(/^\{|\}$/g,"");y.push(m(AST_String,B.args[B.args.length-1],{value:r}));B.args=y;return B}catch(z){if(z instanceof JS_Parse_Error){u.warn("Error parsing code passed to new Function [{file}:{line},{col}]",B.args[B.args.length-1].start);u.warn(z.toString())}else{console.log(z);throw z}}}break}}else{if(t instanceof AST_Dot&&t.property=="toString"&&B.args.length==0){return m(AST_Binary,B,{left:m(AST_String,B,{value:""}),operator:"+",right:t.expression}).transform(u)}else{if(t instanceof AST_Dot&&t.expression instanceof AST_Array&&t.property=="join"){EXIT:{var w=B.args.length==0?",":B.args[0].evaluate(u)[1];if(w==null){break EXIT}var p=t.expression.elements.reduce(function(C,D){D=D.evaluate(u);if(C.length==0||D.length==1){C.push(D)}else{var E=C[C.length-1];if(E.length==2){var F=""+E[1]+w+D[1];C[C.length-1]=[n(u,F,E[0]),F]}else{C.push(D)}}return C},[]);if(p.length==0){return m(AST_String,B,{value:""})}if(p.length==1){return p[0][0]}if(w==""){var v;if(p[0][0] instanceof AST_String||p[1][0] instanceof AST_String){v=p.shift()[0]}else{v=m(AST_String,B,{value:""})}return p.reduce(function(D,C){return m(AST_Binary,C[0],{operator:"+",left:D,right:C[0],})},v).transform(u)}var s=B.clone();s.expression=s.expression.clone();s.expression.expression=s.expression.expression.clone();s.expression.expression.elements=p.map(function(C){return C[0]});return f(B,s)}}}}}if(u.option("side_effects")){if(B.expression instanceof AST_Function&&B.args.length==0&&!AST_Block.prototype.has_side_effects.call(B.expression,u)){return m(AST_Undefined,B).transform(u)}}if(u.option("drop_console")){if(B.expression instanceof AST_PropAccess&&B.expression.expression instanceof AST_SymbolRef&&B.expression.expression.name=="console"&&B.expression.expression.undeclared()){return m(AST_Undefined,B).transform(u)}}return B.evaluate(u)[0]});k(AST_New,function(p,r){if(r.option("unsafe")){var q=p.expression;if(q instanceof AST_SymbolRef&&q.undeclared()){switch(q.name){case"Object":case"RegExp":case"Function":case"Error":case"Array":return m(AST_Call,p,p).transform(r)}}}return p});k(AST_Seq,function(q,s){if(!s.option("side_effects")){return q}if(!q.car.has_side_effects(s)){var r;if(!(q.cdr instanceof AST_SymbolRef&&q.cdr.name=="eval"&&q.cdr.undeclared()&&(r=s.parent()) instanceof AST_Call&&r.expression===q)){return q.cdr}}if(s.option("cascade")){if(q.car instanceof AST_Assign&&!q.car.left.has_side_effects(s)){if(q.car.left.equivalent_to(q.cdr)){return q.car}if(q.cdr instanceof AST_Call&&q.cdr.expression.equivalent_to(q.car.left)){q.cdr.expression=q.car;return q.cdr}}if(!q.car.has_side_effects(s)&&!q.cdr.has_side_effects(s)&&q.car.equivalent_to(q.cdr)){return q.car}}if(q.cdr instanceof AST_UnaryPrefix&&q.cdr.operator=="void"&&!q.cdr.expression.has_side_effects(s)){q.cdr.operator=q.car;return q.cdr}if(q.cdr instanceof AST_Undefined){return m(AST_UnaryPrefix,q,{operator:"void",expression:q.car})}return q});AST_Unary.DEFMETHOD("lift_sequences",function(r){if(r.option("sequences")){if(this.expression instanceof AST_Seq){var q=this.expression;var p=q.to_array();this.expression=p.pop();p.push(this);q=AST_Seq.from_array(p).transform(r);return q}}return this});k(AST_UnaryPostfix,function(p,q){return p.lift_sequences(q)});k(AST_UnaryPrefix,function(p,r){p=p.lift_sequences(r);var q=p.expression;if(r.option("booleans")&&r.in_boolean_context()){switch(p.operator){case"!":if(q instanceof AST_UnaryPrefix&&q.operator=="!"){return q.expression}break;case"typeof":r.warn("Boolean expression always true [{file}:{line},{col}]",p.start);return m(AST_True,p)}if(q instanceof AST_Binary&&p.operator=="!"){p=f(p,q.negate(r))}}return p.evaluate(r)[0]});function j(q,s){var r=s.option("pure_getters");s.options.pure_getters=false;var p=q.has_side_effects(s);s.options.pure_getters=r;return p}AST_Binary.DEFMETHOD("lift_sequences",function(r){if(r.option("sequences")){if(this.left instanceof AST_Seq){var q=this.left;var p=q.to_array();this.left=p.pop();p.push(this);q=AST_Seq.from_array(p).transform(r);return q}if(this.right instanceof AST_Seq&&this instanceof AST_Assign&&!j(this.left,r)){var q=this.right;var p=q.to_array();this.right=p.pop();p.push(this);q=AST_Seq.from_array(p).transform(r);return q}}return this});var d=makePredicate("== === != !== * & | ^");k(AST_Binary,function(p,u){var r=u.has_directive("use asm")?noop:function(x,w){if(w||!(p.left.has_side_effects(u)||p.right.has_side_effects(u))){if(x){p.operator=x}var v=p.left;p.left=p.right;p.right=v}};if(d(p.operator)){if(p.right instanceof AST_Constant&&!(p.left instanceof AST_Constant)){if(!(p.left instanceof AST_Binary&&PRECEDENCE[p.left.operator]>=PRECEDENCE[p.operator])){r(null,true)}}if(/^[!=]==?$/.test(p.operator)){if(p.left instanceof AST_SymbolRef&&p.right instanceof AST_Conditional){if(p.right.consequent instanceof AST_SymbolRef&&p.right.consequent.definition()===p.left.definition()){if(/^==/.test(p.operator)){return p.right.condition}if(/^!=/.test(p.operator)){return p.right.condition.negate(u)}}if(p.right.alternative instanceof AST_SymbolRef&&p.right.alternative.definition()===p.left.definition()){if(/^==/.test(p.operator)){return p.right.condition.negate(u)}if(/^!=/.test(p.operator)){return p.right.condition}}}if(p.right instanceof AST_SymbolRef&&p.left instanceof AST_Conditional){if(p.left.consequent instanceof AST_SymbolRef&&p.left.consequent.definition()===p.right.definition()){if(/^==/.test(p.operator)){return p.left.condition}if(/^!=/.test(p.operator)){return p.left.condition.negate(u)}}if(p.left.alternative instanceof AST_SymbolRef&&p.left.alternative.definition()===p.right.definition()){if(/^==/.test(p.operator)){return p.left.condition.negate(u)}if(/^!=/.test(p.operator)){return p.left.condition}}}}}p=p.lift_sequences(u);if(u.option("comparisons")){switch(p.operator){case"===":case"!==":if((p.left.is_string(u)&&p.right.is_string(u))||(p.left.is_boolean()&&p.right.is_boolean())){p.operator=p.operator.substr(0,2)}case"==":case"!=":if(p.left instanceof AST_String&&p.left.value=="undefined"&&p.right instanceof AST_UnaryPrefix&&p.right.operator=="typeof"&&u.option("unsafe")){if(!(p.right.expression instanceof AST_SymbolRef)||!p.right.expression.undeclared()){p.right=p.right.expression;p.left=m(AST_Undefined,p.left).optimize(u);if(p.operator.length==2){p.operator+="="}}}break}}if(u.option("booleans")&&u.in_boolean_context()){switch(p.operator){case"&&":var s=p.left.evaluate(u);var q=p.right.evaluate(u);if((s.length>1&&!s[1])||(q.length>1&&!q[1])){u.warn("Boolean && always false [{file}:{line},{col}]",p.start);return m(AST_False,p)}if(s.length>1&&s[1]){return q[0]}if(q.length>1&&q[1]){return s[0]}break;case"||":var s=p.left.evaluate(u);var q=p.right.evaluate(u);if((s.length>1&&s[1])||(q.length>1&&q[1])){u.warn("Boolean || always true [{file}:{line},{col}]",p.start);return m(AST_True,p)}if(s.length>1&&!s[1]){return q[0]}if(q.length>1&&!q[1]){return s[0]}break;case"+":var s=p.left.evaluate(u);var q=p.right.evaluate(u);if((s.length>1&&s[0] instanceof AST_String&&s[1])||(q.length>1&&q[0] instanceof AST_String&&q[1])){u.warn("+ in boolean context always true [{file}:{line},{col}]",p.start);return m(AST_True,p)}break}}if(u.option("comparisons")){if(!(u.parent() instanceof AST_Binary)||u.parent() instanceof AST_Assign){var t=m(AST_UnaryPrefix,p,{operator:"!",expression:p.negate(u)});p=f(p,t)}switch(p.operator){case"<":r(">");break;case"<=":r(">=");break}}if(p.operator=="+"&&p.right instanceof AST_String&&p.right.getValue()===""&&p.left instanceof AST_Binary&&p.left.operator=="+"&&p.left.is_string(u)){return p.left}if(u.option("evaluate")){if(p.operator=="+"){if(p.left instanceof AST_Constant&&p.right instanceof AST_Binary&&p.right.operator=="+"&&p.right.left instanceof AST_Constant&&p.right.is_string(u)){p=m(AST_Binary,p,{operator:"+",left:m(AST_String,null,{value:""+p.left.getValue()+p.right.left.getValue(),start:p.left.start,end:p.right.left.end}),right:p.right.right})}if(p.right instanceof AST_Constant&&p.left instanceof AST_Binary&&p.left.operator=="+"&&p.left.right instanceof AST_Constant&&p.left.is_string(u)){p=m(AST_Binary,p,{operator:"+",left:p.left.left,right:m(AST_String,null,{value:""+p.left.right.getValue()+p.right.getValue(),start:p.left.right.start,end:p.right.end})})}if(p.left instanceof AST_Binary&&p.left.operator=="+"&&p.left.is_string(u)&&p.left.right instanceof AST_Constant&&p.right instanceof AST_Binary&&p.right.operator=="+"&&p.right.left instanceof AST_Constant&&p.right.is_string(u)){p=m(AST_Binary,p,{operator:"+",left:m(AST_Binary,p.left,{operator:"+",left:p.left.left,right:m(AST_String,null,{value:""+p.left.right.getValue()+p.right.left.getValue(),start:p.left.right.start,end:p.right.left.end})}),right:p.right.right})}}}if(p.right instanceof AST_Binary&&p.right.operator==p.operator&&(p.operator=="*"||p.operator=="&&"||p.operator=="||")){p.left=m(AST_Binary,p.left,{operator:p.operator,left:p.left,right:p.right.left});p.right=p.right.right;return p.transform(u)}return p.evaluate(u)[0]});k(AST_SymbolRef,function(p,r){if(p.undeclared()){var q=r.option("global_defs");if(q&&q.hasOwnProperty(p.name)){return n(r,q[p.name],p)}switch(p.name){case"undefined":return m(AST_Undefined,p);case"NaN":return m(AST_NaN,p);case"Infinity":return m(AST_Infinity,p)}}return p});k(AST_Undefined,function(p,t){if(t.option("unsafe")){var r=t.find_parent(AST_Scope);var q=r.find_variable("undefined");if(q){var s=m(AST_SymbolRef,p,{name:"undefined",scope:r,thedef:q});s.reference();return s}}return p});var c=["+","-","/","*","%",">>","<<",">>>","|","^","&"];k(AST_Assign,function(p,q){p=p.lift_sequences(q);if(p.operator=="="&&p.left instanceof AST_SymbolRef&&p.right instanceof AST_Binary&&p.right.left instanceof AST_SymbolRef&&p.right.left.name==p.left.name&&member(p.right.operator,c)){p.operator=p.right.operator+"=";p.right=p.right.right}return p});k(AST_Conditional,function(q,v){if(!v.option("conditionals")){return q}if(q.condition instanceof AST_Seq){var p=q.condition.car;q.condition=q.condition.cdr;return AST_Seq.cons(p,q)}var s=q.condition.evaluate(v);if(s.length>1){if(s[1]){v.warn("Condition always true [{file}:{line},{col}]",q.start);return q.consequent}else{v.warn("Condition always false [{file}:{line},{col}]",q.start);return q.alternative}}var u=s[0].negate(v);if(f(s[0],u)===u){q=m(AST_Conditional,q,{condition:u,consequent:q.alternative,alternative:q.consequent})}var t=q.consequent;var r=q.alternative;if(t instanceof AST_Assign&&r instanceof AST_Assign&&t.operator==r.operator&&t.left.equivalent_to(r.left)){return m(AST_Assign,q,{operator:t.operator,left:t.left,right:m(AST_Conditional,q,{condition:q.condition,consequent:t.right,alternative:r.right})})}if(t instanceof AST_Call&&r.TYPE===t.TYPE&&t.args.length==r.args.length&&t.expression.equivalent_to(r.expression)){if(t.args.length==0){return m(AST_Seq,q,{car:q.condition,cdr:t})}if(t.args.length==1){t.args[0]=m(AST_Conditional,q,{condition:q.condition,consequent:t.args[0],alternative:r.args[0]});return t}}if(t instanceof AST_Conditional&&t.alternative.equivalent_to(r)){return m(AST_Conditional,q,{condition:m(AST_Binary,q,{left:q.condition,operator:"&&",right:t.condition}),consequent:t.consequent,alternative:r})}return q});k(AST_Boolean,function(q,s){if(s.option("booleans")){var r=s.parent();if(r instanceof AST_Binary&&(r.operator=="=="||r.operator=="!=")){s.warn("Non-strict equality against boolean: {operator} {value} [{file}:{line},{col}]",{operator:r.operator,value:q.value,file:r.start.file,line:r.start.line,col:r.start.col,});return m(AST_Number,q,{value:+q.value})}return m(AST_UnaryPrefix,q,{operator:"!",expression:m(AST_Number,q,{value:1-q.value})})}return q});k(AST_Sub,function(q,s){var r=q.property;if(r instanceof AST_String&&s.option("properties")){r=r.getValue();if(RESERVED_WORDS(r)?s.option("screw_ie8"):is_identifier_string(r)){return m(AST_Dot,q,{expression:q.expression,property:r}).optimize(s)}var p=parseFloat(r);if(!isNaN(p)&&p.toString()==r){q.property=m(AST_Number,q.property,{value:p})}}return q});k(AST_Dot,function(p,q){return p.evaluate(q)[0]});function a(p,q){if(q.option("booleans")&&q.in_boolean_context()){return m(AST_True,p)}return p}k(AST_Array,a);k(AST_Object,a);k(AST_RegExp,a)})();var default_options={compress:{hoist_funs:false,hoist_vars:false,dead_code:true,unused:true,if_return:true,drop_console:true},mangle:{sort:true}};function uglify(c,a){a=a||{};var e=defaults({},a.parse);var g=defaults({},a.compress);var d=defaults({},a.output);e=defaults(e,default_options.parse,true);g=defaults(g,default_options.compress,true);d=defaults(d,default_options.output,true);var b=parse(c,e);b.figure_out_scope();var h=new Compressor(g);var f=b.transform(h);f.figure_out_scope();f.compute_char_frequency();f.mangle_names();c=f.print_to_string(d);return c};
</script>
<script class="ztB">
(function(u){
	var prng = (function rnd(){
			var iMersenne = 2147483647
				,oReturn = {
					seed: iMersenne*Math.random()<<0
					,rnd: function(seed) {
						setSeed(seed);
						oReturn.seed = oReturn.seed*16807%iMersenne;
						return oReturn.seed;
					}
					,random: function(seed) {
						setSeed(seed);
						return oReturn.rnd()/iMersenne;
					}
				}
			;
			function setSeed(seed){
				if (seed!==undefined) oReturn.seed = seed;
			}
			return oReturn;
		})()
		//
		,iStartSeed = prng.seed
		,sInput1 = 'myName-{hostname}'
		,sInput2 = '{input1}@provider.com'
		,iPasswordLength = 10
		//
		,aChars,iChars
		//
		,sName = 'a'
		,sClass = '.'+sName
		,mBody = document.body
		,mWrap = createElement(u,sName)
		,mA = createElement('command','right close',mWrap,handleCloseClick,String.fromCharCode(10005))
		,mInput1 = createInput(mWrap)
		,mInput2 = createInput(mWrap)
		,mResult = createInput(mWrap)//createInput(mWrap,u,u,u,'password')
//		,mCheck = createInput(mWrap,u,handleCheckbox,' ','checkbox')
		,mStyle = createElement('style',u,document.head)
		,mOld = document.querySelector(sClass)
		,mStyleSrc = document.querySelector('.ztA')
		,sStyleSrc = mStyleSrc?shrink(mStyleSrc.textContent):'#ztA{}'
		,mScript = document.querySelector('.ztB')
		,sNoHost = 'nohost'
		,sHostName = location.hostname.split('.').filter(function(s){return ['localhost','www'].indexOf(s)===-1}).shift()||'nohost'
	;

	/**
	 * Initialise, is sif for clarity
	 */
	(function init() {
		mOld&&mBody.removeChild(mOld);
		mStyle.textContent = sStyleSrc.replace(/\.ztA/g,sClass);
		mInput1.addEventListener('keyup',calculatePassword);
		mInput2.addEventListener('keyup',calculatePassword);
		mResult.addEventListener('focus',handleResultClick);
//		mResult.setAttribute('readonly','true');
		mResult.classList.add('result');
		//
		if (sHostName===sNoHost) mWrap.classList.add(sNoHost);
		//
		/*var mHold = document.createElement('p');
		mHold.innerHTML = '<svg viewBox="0 12.5 32 32" xml:space="preserve"><path d="M22,12.5c-5.5,0-10,4.5-10,10c0,0.6,0.1,1.2,0.2,1.8L0,36.5v6c0,1.1,0.9,2,2,2h2v-2h4v-4h4v-4h4l2.6-2.6 c1.1,0.4,2.2,0.6,3.4,0.6c5.5,0,10-4.5,10-10S27.5,12.5,22,12.5z M25,22.5c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S26.6,22.5,25,22.5z"/></svg>';
		mCheck.parentNode.appendChild(mHold.querySelector('svg'));*/
		//
		initFields();
		mScript&&initAdmin();
		mBody.appendChild(mWrap);
	})();

	/**
	 * Initialises input fields
	 */
	function initFields(){
		setCharList();
		mInput1.value = inputReplace(sInput1);
		mInput2.value = inputReplace(sInput2).replace(/\{input1\}/,mInput1.value);
		calculatePassword();
	}

	/**
	 * Initialises admin view.
	 * Variables and functions are contained within own scope so uglify can effectively clear this function when creating the bookmarklet.
	 */
	function initAdmin() {
		var minify = window.uglify?function(s){return uglify(s)}:function(s){return s;}
			,sRunScript,sBookmarklet,mBookmarklet,mSeed,mPasswordLength,mInput1Content,mInput2Content,mTextarea,sScript,iAdminChange
		;

//		mResult.type = 'text';
//		mCheck.checked = true;

		sScript = mScript.textContent;
		createElement('hr',u,mWrap);
		createElement('p',u,mWrap,u,'Use the fields below to create your unique password generator bookmarklet (above). When you\'re done drag the [BOOKMARLET] button to your bookmarks bar.');

		mSeed = createInput(mWrap,iStartSeed,handleAdminChange,'seed');
		mPasswordLength = createInput(mWrap,iPasswordLength,handleAdminChange,'length');

		mInput1Content = createInput(mWrap,sInput1,handleAdminChange,'input 1');
		mInput2Content = createInput(mWrap,sInput2,handleAdminChange,'input 2');

		[[mSeed,'The seed for the random number generator is what makes your bookmarklet unique']
			,[mPasswordLength,'The length of your generated password']
			,[mInput1Content,'How to preset the first field. You can use the following variables: {hostname}, {year}']
			,[mInput2Content,'How to preset the second field. You can use the following variables: {hostname}, {year}, {input1}']
		].forEach(function(a){
			createElement('span','info',a[0].parentNode,u,'?').setAttribute('data-title',a[1]);
		});
		//
		mBookmarklet = createElement('a','data bookmarklet',mWrap,handleBookmarkletClick,'x');
		mBookmarklet.setAttribute('data-a','bookmarklet');
		mBookmarklet.setAttribute('title','Click to refresh, drag to bookmarksbar to use');
		//
		mTextarea = createElement('textarea',u,mWrap);
		mTextarea.setAttribute('readonly','true');
		//
		createElement('command',u,mWrap,handleTestClick,'test');
		//
		refreshAdmin();
		/**
		 * Handles click event on the bookmarklet in such a way that the bookmarklet can be tested while maintaining the admin interface (which is stripped from the bookmarklet itself).
		 */
		function handleBookmarkletClick(){
			mBody.removeChild(mWrap);
			mBookmarklet.setAttribute('href',sRunScript);
			setTimeout(function(){
				mBookmarklet.setAttribute('href',sBookmarklet);
			},40);
		}
		/**
		 * Delayed admin change handling so refresh is run only once while typing.
		 * Also checks and handles numeral input for seed and length.
		 * @param {Event} e
		 */
		function handleAdminChange(e){
			var mTarget = e.target;
			([mSeed,mPasswordLength].indexOf(mTarget)!==-1)&&checkNumeral(mTarget);
			clearTimeout(iAdminChange);
			iAdminChange = setTimeout(refreshAdmin,300);
		}
		/**
		 * Check and possibly adjust input values to be numeral.
		 */
		function checkNumeral(input){
			var sVal = input.value
				,sNum = sVal.replace(/[^\d]*/g,'');
			if (sVal!==sNum) input.value = sNum;
		}
		/**
		 * Set the bookmarklet script by implementing the admin variables.
		 */
		function refreshAdmin() {
			var sPrepareScript = sScript
					.replace(/#ztA\{\}/g,sStyleSrc)
					.replace(/seed:.*/,'seed:'+mSeed.value)
					.replace(/sInput1\s?=\s?.*/,'sInput1=\''+mInput1Content.value+'\'')
					.replace(/sInput2\s?=\s?.*/,'sInput2=\''+mInput2Content.value+'\'')
					.replace(/iPasswordLength\s?=\s?.*/,'iPasswordLength='+mPasswordLength.value)
					.replace(/sName\s?=\s?.*/,'sName=\''+map(Math.random().toString()).replace(/[^a-z]/gi,'')+'\'')
				,sBookmarkletScript = sPrepareScript.replace(/initAdmin\(\)\s?\{/,'init'+'Admin() {return false;')
			;
			sBookmarklet = 'javascript:'+minify(sBookmarkletScript);
			sRunScript = 'javascript:'+minify(sPrepareScript);
			mBookmarklet.setAttribute('href',sBookmarklet);
			mTextarea.textContent = sBookmarklet;
			//
			iStartSeed = parseInt(mSeed.value,10);
			sInput1 = mInput1Content.value;
			sInput2 = mInput2Content.value;
			iPasswordLength = parseInt(mPasswordLength.value,10);
			initFields();
		}
		var iTestID,aTest = [],aDuplicates = [];
		function handleTestClick(){
			if (iTestID) {
				clearTimeout(iTestID);
				iTestID = u;
				console.log('',aDuplicates.length,'duplicates in',aTest.length+aDuplicates.length,'generations'); // log
			} else {
				aTest.length = 0;
				aDuplicates.length = 0;
				test();
			}
		}
		function test(){
			//console.log('test',iTestID); // log
			iStartSeed = iTestID||1;
			initFields();
			var sResult = mResult.value;
			if (aTest.indexOf(sResult)===-1) {
				aTest.push(sResult);
			} else {
				aDuplicates.push(sResult);
			}
			iTestID = setTimeout(test,1);
		}
	}

	/**
	 * Closes the bookmarklet element
	 * @param e
	 */
	function handleCloseClick(e){
		e.preventDefault();
		mBody.removeChild(mWrap);
	}

	/**
	 * Selects the contents when clicked
	 */
	function handleResultClick(){
		mResult.select();
	}

	function handleCheckbox(e){
		mResult.type = mCheck.checked?'text':'password';
	}

	/**
	 * Build the characterlist used to map characters
	 */
	function setCharList(){
		prng.seed = iStartSeed;
		aChars = (function(a,e){
			[[33,127],[97,123],[65,91],[97,123]].forEach(function(b){
				for (var i=b[0],l=b[1];i<l;i++) {
					if (e.indexOf(i)===-1) {
						a.splice(prng.rnd()%a.length,0,String.fromCharCode(i));
					}
				}
			});
			return a;
		})([],[34,96,39]);
		iChars = aChars.length;
	}

	/**
	 * Replaces the variable code by the variables.
	 * @param {string} s
	 * @returns {string}
	 */
	function inputReplace(s) {
		return s
			.replace(/\{hostname\}/,sHostName)
			.replace(/\{rand\}/,map(Math.random().toString()).replace(/[^a-z]/gi,''))
			.replace(/\{year\}/,(new Date).getFullYear())
		;
	}

	/**
	 * Creates an input element.
	 * @param {HTMLElement} parent
	 * @param {string} value
	 * @param {Function} change
	 * @param {string} label
	 * @param {string} type
	 * @returns {HTMLElement}
	 */
	function createInput(parent,value,change,label,type){
		var mLabel = label&&createElement('label',u,parent,u,label)
			,mInput = createElement('input',u,label?mLabel:parent)
		;
		if (value) mInput.value = value;
		change&&mInput.addEventListener('keyup',change);
		change&&mInput.addEventListener('change',change);
		type&&mInput.setAttribute('type',type);
		return mInput;
	}

	/**
	 * Creates an HTML element.
	 * @param {string} type
	 * @param {string|Array} classes
	 * @param {HTMLElement} parent
	 * @param {Function} click
	 * @param {string} text
	 * @returns {HTMLElement}
	 */
	function createElement(type,classes,parent,click,text){
		var mElement = document.createElement(type||'div');
		if (classes) {
			var oClassList = mElement.classList
				,aArguments = typeof(classes)==='string'?classes.split(' '):classes;
			aArguments.forEach(function(name){oClassList.add(name)});
		}
		parent&&parent.appendChild(mElement);
		click&&mElement.addEventListener('click',click);
		if (text) mElement.textContent = text;
		return mElement;
	}

	/**
	 * Calculates the password.
	 */
	function calculatePassword(){
		var aInput1 = splitByLength(mInput1.value.toString().toLowerCase()).reverse()
			,aInput2 = splitByLength(mInput2.value.toString().toLowerCase())
			,sText = splitByLength(arrayFold(aInput1,aInput2),3).reverse().join('')
		;
		mResult.value = map(sText,iPasswordLength);
	}

	/**
	 * Maps a string to a specific length and converts its characters.
	 * @param {string} s
	 * @param {number} [len=11]
	 * @returns {string}
	 */
	function map(s,len){
		len = len||10;
		var iString = s.length
			,f = iString/len
			,a = []
			,i
			,iMultiplier
		;
		prng.seed = iStartSeed+iString;
		iMultiplier = 31*prng.random()<<0;
		for (i=0;i<len;i++) a[i] = 0;
		for (i=0;i<iString;i++) {
			var iCharCode = s.charCodeAt(i)*iMultiplier
				,fStr = i/f
				,iStr = Math.floor(fStr)
				,fEnd = (i+1)/f
				,iEnd = Math.ceil(fEnd)
			;
			for	(var j=iStr;j<iEnd;j++) {
				var fValue = f*iCharCode;
				if (j===iStr)			fValue *= (j+1)-fStr;
				else if (j===(iEnd-1))	fValue *= fEnd-j;
				a[j] += fValue;
			}
			/*

			pw  8:					|  |  |  |  |  |  |  |  |
			str 6:					|   |   | 2 |   |   |   |
			f = 6/8 = .75
			1/f = 1.333
			:
			i = 2
			pw start: i/f	= 2/.75 = 2.666
			pw end: (i+1)/f	= 3/.75 = 4
			end - start = always 1/f
			:
			for j = floor(start) to < ceil(end)
			2: j===floor(start)  ? ((j+1)-start)*f*s = .333*.75*s = .250*s
			3: j===(ceil(end)-1) ? (end-j)*f*s = 1*.75*s = .750*s

			pw  8:					|  |  |  |  |  |  |  |  |
			str 3:					|       |   1   |       |
			f = 3/8 = .375
			1/f = 2.666
			:
			i = 2
			pw start: i/f	= 1/.375 = 2.666
			pw end: (i+1)/f	= 2/.375 = 5.333
			end - start = always 1/f
			:
			for j = floor(start) to < ceil(end)
			2: j===floor(start)		? ((j+1)-start)*f*s = .333*.375*s = .125*s
			3: else					? f*s = .375*s
			4: else					? f*s = .375*s
			5: j===(ceil(end)-1)	? (end-j)*f*s = .333*.375*s = .125*s

			*/
		}
		return a.map(function(i){
			return aChars[((i<<0)+prng.rnd())%iChars];
		}).join('');
	}

	/**
	 * Splits a string into fixed length pieces.
	 * @param {string} s
	 * @param {number} len
	 * @returns {Array}
	 */
	function splitByLength(s,len) {
		len = len||2;
		var aVal = [];
		while (s!=='') {
			aVal.push(s.substr(0,len));
			s = s.substr(len);
		}
		return aVal;
	}

	/**
	 * Creates a string by merging two arrays (like two card decks).
	 * @param {Array} a
	 * @param {Array} b
	 * @returns {string}
	 */
	function arrayFold(a,b) {
		var aa = a.slice(0),bb=b.slice(0),s='';
		while (aa.length||bb.length){
			s+=aa.pop()||'';
			s+=bb.pop()||'';
		}
		return s;
	}

	/**
	 * Shrinks a string by removing whitespace and newlines where possible (optimised for CSS).
	 * @param s
	 * @returns {string}
	 */
	function shrink(s){
		return s
			.replace(/[\n\r\t]/g,'')
			.replace(/\s?([=\-\/:;,\{\}\[\]\(\)])\s?/g,function(a,b){
				return b;
			})
		;
	}
})();
</script></body></html>